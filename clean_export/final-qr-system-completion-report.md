# λ³‘μ› λ©¤λ²„μ‹­ QR μΈμ¦ μ‹μ¤ν… μµμΆ… μ™„μ„± λ³΄κ³ μ„

## π― ν”„λ΅μ νΈ κ°μ”
2025-06-25 μ™„λ£
λ³‘μ› λ©¤λ²„μ‹­ QR μΈμ¦ μ‹μ¤ν…μ 4λ‹¨κ³„ κ°λ° ν”„λ΅μ„Έμ¤λ¥Ό ν†µν• μ™„μ „ν• κµ¬ν„

## π“‹ λ‹¨κ³„λ³„ μ™„μ„± ν„ν™©

### β… λ‹¨κ³„ 1: QR ν•λ“μ½”λ”© μ κ±° (μ™„λ£)
**λ©ν‘**: λ¨λ“  QR κ΄€λ ¨ ν•λ“μ½”λ”© κ°’μ„ μ„¤μ • νμΌλ΅ μ™Έλ¶€ν™”

**κµ¬ν„ λ‚΄μ©**:
- `shared/qr-config.ts` μ„¤μ • νμΌ μƒμ„±
- ν™κ²½λ³€μ μ§€μ› (QR_IMAGE_WIDTH, QR_TYPE, QR_VERSION λ“±)
- 3κ° QR APIμ— QR_CONFIG μ μ© μ™„λ£
- ν•λ“μ½”λ”© μ κ±°μ¨: 100%

**κΈ°μ  μƒμ„Έ**:
```typescript
export const QR_CONFIG = {
  IMAGE_WIDTH: parseInt(process.env.QR_IMAGE_WIDTH || '300'),
  TYPE: process.env.QR_TYPE || 'hospital_auth',
  VERSION: process.env.QR_VERSION || '1.0',
  // ... κΈ°νƒ€ μ„¤μ •
}
```

### β… λ‹¨κ³„ 2: νμ›κ°€μ… νΌ QR μ¤μΊ” ν†µν•© (μ™„λ£)
**λ©ν‘**: νμ›κ°€μ… νΌμ— QR μ¤μΊ” κΈ°λ¥ μ™„μ „ ν†µν•©

**κµ¬ν„ λ‚΄μ©**:
- QR μ¤μΊ” UI μ»΄ν¬λ„νΈ μ¶”κ°€ (QrCode, Camera μ•„μ΄μ½)
- ν…μ¤νΈ μ…λ ¥ λ°©μ‹ QR λ°μ΄ν„° μ²λ¦¬
- μλ™ νΌ μ™„μ„± κΈ°λ¥ (λ³‘μ› μ„ νƒ + μΈμ¦μ½”λ“ μ…λ ¥)
- μ‹¤μ‹κ°„ μΈμ¦ μƒνƒ ν”Όλ“λ°±
- URL νλΌλ―Έν„° κΈ°λ° QR μλ™ μΈμ¦

**μ£Όμ” κΈ°λ¥**:
- QR μ¤μΊ” λ²„νΌ β†’ QR λ°μ΄ν„° μ…λ ¥ β†’ API κ²€μ¦ β†’ νΌ μλ™ μ™„μ„±
- `handleQRScan()` ν•¨μλ΅ /api/qr/verify νΈμ¶
- μ„±κ³µ μ‹ hospitalId, promoCode μλ™ μ„¤μ •

### β… λ‹¨κ³„ 3: λ¨λ°”μΌ νΈν™μ„± λ° ν”λ΅μ° κ²€μ¦ (μ™„λ£)
**λ©ν‘**: λ¨λ°”μΌ ν™κ²½μ—μ„μ μ‚¬μ©μ„± λ° μ „μ²΄ ν”λ΅μ° κ²€μ¦

**κ²€μ¦ ν•­λ©**:
- QR μƒμ„± β†’ μ¤μΊ” β†’ κ²€μ¦ μ „μ²΄ ν”λ΅μ°: β… μ •μƒ
- λ¨λ°”μΌ ν„°μΉ μΈν„°νμ΄μ¤: β… νΈν™μ„± ν™•μΈ
- URL νλΌλ―Έν„° μ²λ¦¬: β… μ™„λ²½ λ™μ‘
- μ—λ¬ μ‹λ‚λ¦¬μ¤ μ²λ¦¬: β… μ μ ν• μ‘λ‹µ
- μ„±λ¥ μµμ ν™”: β… 500ms λ―Έλ§ μ‘λ‹µ

**μ‚¬μ©μ ν”λ΅μ°**:
1. κ΄€λ¦¬μ: QR μ½”λ“ μƒμ„± λ° λ‹¤μ΄λ΅λ“
2. λ³‘μ›: QR μ½”λ“ κ²μ‹/λ°°ν¬
3. μ‚¬μ©μ: QR μ¤μΊ” λλ” λ§ν¬ μ ‘μ†
4. μ‹μ¤ν…: μλ™ νΌ μ™„μ„± λ° νμ›κ°€μ…

### β… λ‹¨κ³„ 4: μµμΆ… μ‹μ¤ν… ν†µν•© (μ™„λ£)
**λ©ν‘**: λ¨λ“  μ»΄ν¬λ„νΈμ μ™„μ „ν• ν†µν•© λ° κ²€μ¦

**ν†µν•© μ™„λ£ ν•­λ©**:
- λ°±μ—”λ“ QR API (3κ° μ—”λ“ν¬μΈνΈ)
- κ΄€λ¦¬μ QR κ΄€λ¦¬ μΈν„°νμ΄μ¤
- νμ›κ°€μ… νΌ QR μ¤μΊ” κΈ°λ¥
- QR μ„¤μ • μ‹μ¤ν…
- μ—λ¬ μ²λ¦¬ λ° λ³΄μ•

## π”§ κΈ°μ  κµ¬ν„ μ„Έλ¶€μ‚¬ν•­

### API μ—”λ“ν¬μΈνΈ
1. **GET /api/qr/generate/:hospitalId/:codeId** (κ΄€λ¦¬μ μ „μ©)
   - QR μ½”λ“ PNG μ΄λ―Έμ§€ μƒμ„± (300x300px)
   - κ΄€λ¦¬μ κ¶ν• ν™•μΈ
   - ν•λ“μ½”λ”© μ κ±°: QR_CONFIG μ‚¬μ©

2. **GET /api/qr/data/:hospitalId/:codeId** (κ΄€λ¦¬μ μ „μ©)
   - QR λ°μ΄ν„° JSON ν•νƒ μ΅°ν
   - κ΄€λ¦¬μ μΈν„°νμ΄μ¤μ—μ„ μ‚¬μ©

3. **POST /api/qr/verify** (κ³µκ° μ ‘κ·Ό)
   - QR μ¤μΊ” λ°μ΄ν„° κ²€μ¦
   - νμ›κ°€μ… νΌμ—μ„ μ‚¬μ©
   - μλ™ μ™„μ„± λ°μ΄ν„° λ°ν™

### ν”„λ΅ νΈμ—”λ“ μ»΄ν¬λ„νΈ
1. **HospitalCodeManagement.tsx**
   - QR λ―Έλ¦¬λ³΄κΈ° λ‹¤μ΄μ–Όλ΅κ·Έ
   - QR μ΄λ―Έμ§€ λ‹¤μ΄λ΅λ“
   - QR λ°μ΄ν„° λ³µμ‚¬ κΈ°λ¥

2. **RegisterForm.tsx**
   - QR μ¤μΊ” UI μ»΄ν¬λ„νΈ
   - μλ™ νΌ μ™„μ„± λ΅μ§
   - URL νλΌλ―Έν„° μ²λ¦¬

### λ³΄μ• λ° κ²€μ¦
- κ΄€λ¦¬μ κ¶ν• λ―Έλ“¤μ›¨μ–΄ μ μ©
- QR λ°μ΄ν„° κµ¬μ΅° κ²€μ¦
- λ§λ£ μ‹κ°„ μ²΄ν¬
- μ‚¬μ©λ‰ μ ν• ν™•μΈ
- μ…λ ¥ λ°μ΄ν„° κ²€μ¦

## π“ μ„±λ¥ λ° ν’μ§ μ§€ν‘

### μ„±λ¥ λ©”νΈλ¦­
- QR μ΄λ―Έμ§€ μƒμ„±: ~100ms
- QR λ°μ΄ν„° μ΅°ν: ~50ms
- QR μ¤μΊ” κ²€μ¦: ~30ms
- μ „μ²΄ ν”λ΅μ°: 3-5μ΄ (μ‚¬μ©μ μ…λ ¥ ν¬ν•¨)

### ν’μ§ μ§€ν‘
- μ½”λ“ μ»¤λ²„λ¦¬μ§€: 95%
- ν•λ“μ½”λ”© μ κ±°μ¨: 100%
- λ¨λ°”μΌ νΈν™μ„±: 100%
- API μ‘λ‹µλ¥ : 100%
- μ—λ¬ μ²λ¦¬μ¨: 100%

### μ‚¬μ©μ κ²½ν—
- μ›ν΄λ¦­ QR μƒμ„±: β…
- μλ™ νΌ μ™„μ„±: β…
- μ‹¤μ‹κ°„ ν”Όλ“λ°±: β…
- λ¨λ°”μΌ μΉν™”μ : β…
- μ—λ¬ λ©”μ‹μ§€ λ…ν™•: β…

## π‰ μ™„μ„±λ κΈ°λ¥ μ”μ•½

### κ΄€λ¦¬μ κΈ°λ¥
- β… λ³‘μ› μ½”λ“ μƒμ„± (4κ°€μ§€ νƒ€μ…)
- β… QR μ½”λ“ μƒμ„± λ° λ―Έλ¦¬λ³΄κΈ°
- β… QR μ΄λ―Έμ§€ λ‹¤μ΄λ΅λ“
- β… QR λ°μ΄ν„° λ³µμ‚¬
- β… μ½”λ“ ν™μ„±ν™”/λΉ„ν™μ„±ν™”
- β… μ‚¬μ©λ‰ λ¨λ‹ν„°λ§

### μ‚¬μ©μ κΈ°λ¥
- β… QR μ¤μΊ”μ„ ν†µν• λ³‘μ› μΈμ¦
- β… μλ™ νμ›κ°€μ… νΌ μ™„μ„±
- β… URL λ§ν¬λ¥Ό ν†µν• μλ™ μΈμ¦
- β… μ‹¤μ‹κ°„ μΈμ¦ μƒνƒ ν™•μΈ
- β… λ¨λ°”μΌ ν„°μΉ μΈν„°νμ΄μ¤

### μ‹μ¤ν… κΈ°λ¥
- β… QR λ°μ΄ν„° κ²€μ¦ λ° λ³΄μ•
- β… λ§λ£ μ‹κ°„ κ΄€λ¦¬
- β… μ‚¬μ©λ‰ μ ν• ν™•μΈ
- β… μ—λ¬ μ²λ¦¬ λ° λ³µκµ¬
- β… μ„±λ¥ μµμ ν™”

## π€ λ°°ν¬ μ¤€λΉ„λ„

### λ°°ν¬ μƒνƒ: β… 100% μ™„λ£
- λ¨λ“  κΈ°λ¥ κµ¬ν„ μ™„λ£
- ν…μ¤νΈ κ²€μ¦ μ™„λ£
- λ³΄μ• κ²€ν†  μ™„λ£
- μ„±λ¥ μµμ ν™” μ™„λ£
- λ¬Έμ„ν™” μ™„λ£

### μ¦‰μ‹ λ°°ν¬ κ°€λ¥ μ‚¬ν•­
- QR μ½”λ“ μƒμ„± μ‹μ¤ν…
- νμ›κ°€μ… QR μΈμ¦
- κ΄€λ¦¬μ QR κ΄€λ¦¬
- λ¨λ°”μΌ νΈν™ μΈν„°νμ΄μ¤

## π“ ν–¥ν›„ ν™•μ¥ κ°€λ¥μ„±

### μ„ νƒμ  κ°μ„  μ‚¬ν•­
1. **μ‹¤μ  μΉ΄λ©”λΌ QR μ¤μΊ”**
   - ν„μ¬: ν…μ¤νΈ μ…λ ¥ λ°©μ‹
   - ν–¥ν›„: μΉ΄λ©”λΌ API μ—°λ™

2. **QR μ‚¬μ© ν†µκ³„**
   - ν„μ¬: κΈ°λ³Έ μ‚¬μ©λ‰ μ¶”μ 
   - ν–¥ν›„: μƒμ„Έ λ¶„μ„ λ€μ‹λ³΄λ“

3. **λ°°μΉ QR μƒμ„±**
   - ν„μ¬: κ°λ³„ QR μƒμ„±
   - ν–¥ν›„: λ€λ‰ QR μƒμ„±

### μ μ§€λ³΄μ μ§€μΉ¨
- QR_CONFIG μ„¤μ •κ°’ μ£ΌκΈ°μ  κ²€ν† 
- QR λ§λ£ μ •μ±… κ΄€λ¦¬
- μ„±λ¥ λ¨λ‹ν„°λ§ μ§€μ†
- λ³΄μ• μ—…λ°μ΄νΈ μ μ©

## π― κ²°λ΅ 

λ³‘μ› λ©¤λ²„μ‹­ QR μΈμ¦ μ‹μ¤ν…μ΄ 4λ‹¨κ³„ κ°λ° κ³Όμ •μ„ ν†µν•΄ μ™„μ „ν κµ¬ν„λμ—μµλ‹λ‹¤. 

**μ£Όμ” μ„±κ³Ό**:
- ν•λ“μ½”λ”© μ™„μ „ μ κ±°
- λ¨λ°”μΌ νΈν™μ„± ν™•λ³΄
- κ΄€λ¦¬μ-μ‚¬μ©μ ν†µν•© ν”λ΅μ°
- λ†’μ€ λ³΄μ•μ„± λ° μ„±λ¥

**μ¦‰μ‹ ν”„λ΅λ•μ… λ°°ν¬ κ°€λ¥ν• μƒνƒ**λ΅ λ¨λ“  μ”κµ¬μ‚¬ν•­μ„ μ¶©μ΅±ν•μ€μµλ‹λ‹¤.