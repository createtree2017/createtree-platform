# ì°½ì¡°AI ì¢…í•© ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë° ë¡œì§ ëª…ì„¸ì„œ (2025ë…„ 10ì›” ì—…ë°ì´íŠ¸)

> ğŸ“… **ìµœì¢… ì—…ë°ì´íŠ¸**: 2025ë…„ 10ì›” 24ì¼  
> ğŸ“ **ë¬¸ì„œ ë²„ì „**: 2.0  
> ğŸ”„ **ë³€ê²½ ì‚¬í•­**: 21ê°œ ë¼ìš°í„° ëª¨ë“ˆ, 38ê°œ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”, ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ë°˜ì˜

---

## ğŸ“‹ ëª©ì°¨
1. [ì‹œìŠ¤í…œ ê°œìš”](#1-ì‹œìŠ¤í…œ-ê°œìš”)
2. [ë°±ì—”ë“œ ì•„í‚¤í…ì²˜](#2-ë°±ì—”ë“œ-ì•„í‚¤í…ì²˜)
3. [í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜](#3-í”„ë¡ íŠ¸ì—”ë“œ-ì•„í‚¤í…ì²˜)
4. [ì£¼ìš” ë³€ê²½ì‚¬í•­](#4-ì£¼ìš”-ë³€ê²½ì‚¬í•­)
5. [ë³´ì•ˆ ë° ì„±ëŠ¥](#5-ë³´ì•ˆ-ë°-ì„±ëŠ¥)

---

## 1. ì‹œìŠ¤í…œ ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ í•µì‹¬ ëª©ì 

ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ **AI ë³‘ì› ë¬¸í™”ì„¼í„° í”Œë«í¼**ìœ¼ë¡œ, ì‚°ë¶€ì¸ê³¼ ë³‘ì› ê³ ê°ì„ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” ë¬¸í™”ì„¼í„° ì›¹ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤. **PUBLIC ë°°ë„ˆ ì €ì¥ì†Œ ì‹œìŠ¤í…œ**ì„ ìš´ì˜í•˜ë©°, **HIPAA ì˜ë£Œ ë³´ì•ˆ ì œí•œì´ ì—†ëŠ”** ì¼ë°˜ ë¬¸í™” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

#### ì£¼ìš” ê¸°ëŠ¥:
- **AI ìŒì•… ìƒì„±**: TopMediai APIë¥¼ í†µí•œ ë§ì¶¤í˜• ìŒì•… ìƒì„± (íƒœêµìŒì•…, ìì¥ê°€ ë“±)
- **AI ì´ë¯¸ì§€ ìƒì„±**: OpenAI gpt-image-1ê³¼ Google Gemini 2.5 Flash Image Previewë¥¼ í†µí•œ ì´ë¯¸ì§€ ë³€í™˜ ë° ìƒì„±
- **AI ì±„íŒ…**: í˜ë¥´ì†Œë‚˜ ê¸°ë°˜ ëŒ€í™”í˜• AI ì‹œìŠ¤í…œ
- **ì½œë¼ì£¼ ìƒì„±**: ì—¬ëŸ¬ ì´ë¯¸ì§€ë¥¼ ì¡°í•©í•œ ì½œë¼ì£¼ ì œì‘
- **ë³‘ì› íšŒì› ê´€ë¦¬**: QR ì½”ë“œ ê¸°ë°˜ ë³‘ì›ë³„ íšŒì› ë“±ë¡ ë° ê´€ë¦¬
- **ë§ˆì¼ìŠ¤í†¤ ì‹œìŠ¤í…œ**: ì„ì‹  ê¸°ê°„ë³„ ë§ˆì¼ìŠ¤í†¤ ì¶”ì  ë° ì°¸ì—¬í˜• ìº í˜ì¸
- **ê°¤ëŸ¬ë¦¬ ì‹œìŠ¤í…œ**: ë°˜ì‘í˜• ëª¨ë°”ì¼ ìµœì í™” ê°¤ëŸ¬ë¦¬
- **ê´€ë¦¬ì ì‹œìŠ¤í…œ**: ë³‘ì› ê´€ë¦¬ììš© ìº í˜ì¸ ê´€ë¦¬ ë„êµ¬
- **A/B í…ŒìŠ¤íŒ…**: ì‹¤í—˜ ê´€ë¦¬ ë° ê²°ê³¼ ì¶”ì 
- **PWA ì§€ì›**: Progressive Web Appìœ¼ë¡œ ëª¨ë°”ì¼ ìµœì í™”

### 1.2 ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|---------|------|------|------|
| **ëŸ°íƒ€ì„** | Node.js | 20.x | ì„œë²„ ëŸ°íƒ€ì„ |
| **ì–¸ì–´** | TypeScript | 5.6.3 | ì „ì²´ í”„ë¡œì íŠ¸ íƒ€ì… ì•ˆì „ì„± |
| **ë°±ì—”ë“œ í”„ë ˆì„ì›Œí¬** | Express.js | 4.21.2 | REST API ì„œë²„ |
| **í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬** | React | 18.3.1 | SPA UI í”„ë ˆì„ì›Œí¬ |
| **ë¼ìš°íŒ…** | Wouter | 3.3.5 | í´ë¼ì´ì–¸íŠ¸ ë¼ìš°íŒ… |
| **UI ì»´í¬ë„ŒíŠ¸** | Radix UI + shadcn/ui | Latest | ì ‘ê·¼ì„± ê¸°ë°˜ UI ì»´í¬ë„ŒíŠ¸ |
| **ìŠ¤íƒ€ì¼ë§** | Tailwind CSS | 3.4.14 | ìœ í‹¸ë¦¬í‹° ê¸°ë°˜ CSS |
| **ë°ì´í„°ë² ì´ìŠ¤** | PostgreSQL (Neon) | - | ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ |
| **ORM** | Drizzle ORM | 0.38.4 | íƒ€ì… ì•ˆì „ SQL ì¿¼ë¦¬ |
| **ì¸ì¦** | JWT + Firebase Auth | - | ì´ì¤‘ ì¸ì¦ ì‹œìŠ¤í…œ |
| **ì„¸ì…˜ ê´€ë¦¬** | express-session | 1.18.1 | ì„œë²„ ì„¸ì…˜ ê´€ë¦¬ |
| **íŒŒì¼ ì €ì¥** | Google Cloud Storage | 7.16.0 | í´ë¼ìš°ë“œ íŒŒì¼ ì €ì¥ì†Œ (PUBLIC) |
| **AI ì„œë¹„ìŠ¤** | OpenAI API | 4.104.0 | gpt-image-1 (ì´ë¯¸ì§€ ìƒì„±) |
| **AI ì„œë¹„ìŠ¤** | Google Generative AI | 0.24.1 | gemini-2.5-flash-image-preview |
| **ìŒì•… ìƒì„±** | TopMediai API | Custom | AI ìŒì•… ìƒì„± |
| **ìƒíƒœ ê´€ë¦¬** | TanStack Query | 5.60.5 | ì„œë²„ ìƒíƒœ ê´€ë¦¬ |
| **í¼ ê´€ë¦¬** | React Hook Form | 7.53.1 | í¼ ìœ íš¨ì„± ê²€ì‚¬ |
| **ë¹Œë“œ ë„êµ¬** | Vite | 5.4.9 | ê°œë°œ ì„œë²„ ë° ë²ˆë“¤ë§ |
| **PWA** | vite-plugin-pwa | 1.0.0 | Progressive Web App |
| **ì´ë¯¸ì§€ ì²˜ë¦¬** | Sharp | 0.34.2 | ì¸ë„¤ì¼ ìƒì„± |
| **ë³´ì•ˆ** | bcrypt | 5.1.1 | ë¹„ë°€ë²ˆí˜¸ í•´ì‹± |
| **ë³´ì•ˆ** | helmet | 8.1.0 | HTTP ë³´ì•ˆ í—¤ë” |
| **QR ì½”ë“œ** | qrcode | 1.5.4 | QR ì½”ë“œ ìƒì„± |
| **ì´ë©”ì¼** | nodemailer | 7.0.4 | ì´ë©”ì¼ ë°œì†¡ |

### 1.3 ğŸ—ï¸ í˜„ì¬ ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ… ìŠ¤íƒ

| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ  | ìš©ë„ |
|---------|------|------|
| **í˜¸ìŠ¤íŒ…(Frontend)** | Express.js Static Serving (Vite Build) | React SPA ì •ì  íŒŒì¼ ì„œë¹„ìŠ¤ |
| **í˜¸ìŠ¤íŒ…(Backend)** | Express.js Server (Node.js Runtime) | REST API ì„œë²„ ì‹¤í–‰ |
| **ëŸ°íƒ€ì„ í”Œë«í¼** | Replit Containers (Google Cloud Platform) | ë‹¨ì¼ Node.js í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ |
| **ë°ì´í„°ë² ì´ìŠ¤** | PostgreSQL (Neon Serverless) | ê´€ê³„í˜• ë°ì´í„° ì €ì¥ |
| **ìŠ¤í† ë¦¬ì§€** | Google Cloud Storage | ì—…ë¡œë“œ ì´ë¯¸ì§€/íŒŒì¼ ì €ì¥ (PUBLIC/PRIVATE ë¶„ë¦¬) |
| **ë¹Œë“œ ë„êµ¬** | Vite + esbuild | í”„ë¡ íŠ¸ì—”ë“œ/ë°±ì—”ë“œ ë²ˆë“¤ë§ |
| **ì„¸ì…˜ ì €ì¥ì†Œ** | PostgreSQL (connect-pg-simple) | ì‚¬ìš©ì ì„¸ì…˜ ê´€ë¦¬ |

### 1.4 í”„ë¡œì íŠ¸ íŒŒì¼ êµ¬ì¡°

```
í”„ë¡œì íŠ¸ ë£¨íŠ¸/
â”œâ”€â”€ client/                   # í”„ë¡ íŠ¸ì—”ë“œ React ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ public/              # ì •ì  íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ icons/           # PWA ì•„ì´ì½˜
â”‚   â”‚   â””â”€â”€ manifest.json    # PWA ë§¤ë‹ˆí˜ìŠ¤íŠ¸
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/      # React ì»´í¬ë„ŒíŠ¸
â”‚       â”‚   â”œâ”€â”€ admin/       # ê´€ë¦¬ì ì»´í¬ë„ŒíŠ¸
â”‚       â”‚   â”œâ”€â”€ CollageBuilder/  # ì½œë¼ì£¼ ë¹Œë”
â”‚       â”‚   â”œâ”€â”€ gallery/     # ê°¤ëŸ¬ë¦¬ ì»´í¬ë„ŒíŠ¸
â”‚       â”‚   â”œâ”€â”€ hospital/    # ë³‘ì› ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚       â”‚   â”œâ”€â”€ MilestoneApplication/  # ë§ˆì¼ìŠ¤í†¤ ì‹ ì²­
â”‚       â”‚   â”œâ”€â”€ MusicGenerator/  # ìŒì•… ìƒì„± UI
â”‚       â”‚   â””â”€â”€ ui/          # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”‚       â”œâ”€â”€ pages/           # ë¼ìš°íŠ¸ í˜ì´ì§€
â”‚       â”‚   â”œâ”€â”€ admin/       # ê´€ë¦¬ì í˜ì´ì§€
â”‚       â”‚   â”œâ”€â”€ hospital/    # ë³‘ì› í˜ì´ì§€
â”‚       â”‚   â””â”€â”€ signup/      # íšŒì›ê°€ì… í˜ì´ì§€
â”‚       â”œâ”€â”€ hooks/           # React ì»¤ìŠ¤í…€ í›…
â”‚       â”œâ”€â”€ lib/             # ìœ í‹¸ë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚       â”œâ”€â”€ stores/          # ìƒíƒœ ê´€ë¦¬
â”‚       â”œâ”€â”€ styles/          # ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼
â”‚       â””â”€â”€ App.tsx          # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ server/                  # ë°±ì—”ë“œ Express ì„œë²„
â”‚   â”œâ”€â”€ middleware/          # Express ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ auth.ts          # JWT ì¸ì¦
â”‚   â”‚   â”œâ”€â”€ admin-auth.ts    # ê´€ë¦¬ì ê¶Œí•œ
â”‚   â”‚   â”œâ”€â”€ permission.ts    # ê¶Œí•œ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ rate-limiter.ts  # API ì†ë„ ì œí•œ
â”‚   â”‚   â””â”€â”€ error-handler.ts # ì—ëŸ¬ ì²˜ë¦¬
â”‚   â”œâ”€â”€ routes/              # API ë¼ìš°íŠ¸ (21ê°œ ëª¨ë“ˆ)
â”‚   â”‚   â”œâ”€â”€ admin-routes.ts  # ê´€ë¦¬ì API
â”‚   â”‚   â”œâ”€â”€ auth.ts          # ì¸ì¦ API
â”‚   â”‚   â”œâ”€â”€ banner-migration.ts # ë°°ë„ˆ ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â”‚   â”œâ”€â”€ chat-routes.ts   # ì±„íŒ… API
â”‚   â”‚   â”œâ”€â”€ collage.ts       # ì½œë¼ì£¼ API
â”‚   â”‚   â”œâ”€â”€ concepts.ts      # ì»¨ì…‰ ê´€ë¦¬ API
â”‚   â”‚   â”œâ”€â”€ exports.ts       # ë°ì´í„° ë‚´ë³´ë‚´ê¸° API
â”‚   â”‚   â”œâ”€â”€ gallery.ts       # ê°¤ëŸ¬ë¦¬ API
â”‚   â”‚   â”œâ”€â”€ google-oauth.ts  # Google OAuth
â”‚   â”‚   â”œâ”€â”€ hospital-routes.ts # ë³‘ì› ê´€ë¦¬ API
â”‚   â”‚   â”œâ”€â”€ image.ts         # ì´ë¯¸ì§€ ìƒì„± API
â”‚   â”‚   â”œâ”€â”€ milestone-routes.ts # ë§ˆì¼ìŠ¤í†¤ API
â”‚   â”‚   â”œâ”€â”€ misc-routes.ts   # ê¸°íƒ€ ìœ í‹¸ë¦¬í‹° API
â”‚   â”‚   â”œâ”€â”€ music-engine-routes.ts # ìŒì•… ìƒì„± API
â”‚   â”‚   â”œâ”€â”€ placeholder.ts   # í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ API
â”‚   â”‚   â”œâ”€â”€ profile.ts       # í”„ë¡œí•„ ê´€ë¦¬ API
â”‚   â”‚   â”œâ”€â”€ public-routes.ts # ê³µê°œ ì •ë³´ API
â”‚   â”‚   â”œâ”€â”€ service-catalog.ts # ì„œë¹„ìŠ¤ ì¹´íƒˆë¡œê·¸ API
â”‚   â”‚   â”œâ”€â”€ test-routes.ts   # í…ŒìŠ¤íŠ¸ API
â”‚   â”‚   â”œâ”€â”€ upload.ts        # GCS ì—…ë¡œë“œ API
â”‚   â”‚   â””â”€â”€ user-settings.ts # ì‚¬ìš©ì ì„¤ì • API
â”‚   â”œâ”€â”€ services/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ auth.ts          # ì¸ì¦ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ collageServiceV2.ts # ì½œë¼ì£¼ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ email.ts         # ì´ë©”ì¼ ë°œì†¡
â”‚   â”‚   â”œâ”€â”€ firebase-auth.ts # Firebase ì¸ì¦
â”‚   â”‚   â”œâ”€â”€ gemini.ts        # Google Gemini API
â”‚   â”‚   â”œâ”€â”€ milestones.ts    # ë§ˆì¼ìŠ¤í†¤ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ openai-dalle3.ts # OpenAI gpt-image-1 ì´ë¯¸ì§€
â”‚   â”‚   â””â”€â”€ topmedia-service.ts # TopMediai ìŒì•…
â”‚   â”œâ”€â”€ utils/               # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚   â”œâ”€â”€ gcs-image-storage.ts # GCS ì´ë¯¸ì§€ ì €ì¥
â”‚   â”‚   â””â”€â”€ thumbnail.ts     # ì¸ë„¤ì¼ ìƒì„±
â”‚   â”œâ”€â”€ index.ts             # ì„œë²„ ì§„ì…ì 
â”‚   â”œâ”€â”€ routes.ts            # ë¼ìš°íŠ¸ ë“±ë¡
â”‚   â”œâ”€â”€ storage.ts           # ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬
â”‚   â””â”€â”€ vite.ts              # Vite ê°œë°œ ì„œë²„
â”œâ”€â”€ shared/                  # ê³µìœ  ì½”ë“œ
â”‚   â”œâ”€â”€ schema.ts            # Drizzle ORM ìŠ¤í‚¤ë§ˆ (38ê°œ í…Œì´ë¸”)
â”‚   â”œâ”€â”€ constants.ts         # ê³µí†µ ìƒìˆ˜
â”‚   â””â”€â”€ qr-config.ts         # QR ì„¤ì •
â”œâ”€â”€ db/                      # ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”œâ”€â”€ index.ts             # DB ì—°ê²°
â”‚   â””â”€â”€ seed.ts              # ì‹œë“œ ë°ì´í„°
â”œâ”€â”€ static/                  # PUBLIC ì •ì  íŒŒì¼ (ì˜ë£Œ ë³´ì•ˆ ì œí•œ ì—†ìŒ)
â”‚   â”œâ”€â”€ banner/              # ë°°ë„ˆ ì´ë¯¸ì§€
â”‚   â”œâ”€â”€ collages/            # ì½œë¼ì£¼ ì´ë¯¸ì§€
â”‚   â””â”€â”€ milestones/          # ë§ˆì¼ìŠ¤í†¤ ì´ë¯¸ì§€
â”œâ”€â”€ attached_assets/         # ì²¨ë¶€ íŒŒì¼
â”œâ”€â”€ package.json             # ì˜ì¡´ì„± ê´€ë¦¬
â”œâ”€â”€ vite.config.ts           # Vite ì„¤ì •
â”œâ”€â”€ tailwind.config.ts       # Tailwind ì„¤ì •
â”œâ”€â”€ drizzle.config.ts        # Drizzle ì„¤ì •
â”œâ”€â”€ replit.md               # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â””â”€â”€ .env                    # í™˜ê²½ ë³€ìˆ˜
```

---

## 2. ë°±ì—”ë“œ ì•„í‚¤í…ì²˜

### 2.1 ë¼ìš°í„° ëª¨ë“ˆ êµ¬ì¡° (21ê°œ)

í˜„ì¬ ì‹œìŠ¤í…œì€ **21ê°œì˜ ëª¨ë“ˆí™”ëœ ë¼ìš°í„° íŒŒì¼**ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ê° ë¼ìš°í„°ëŠ” íŠ¹ì • ê¸°ëŠ¥ ì˜ì—­ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.

| ë²ˆí˜¸ | íŒŒì¼ëª… | ì£¼ìš” ê¸°ëŠ¥ |
|------|--------|----------|
| 1 | `auth.ts` | ì‚¬ìš©ì ì¸ì¦ (íšŒì›ê°€ì…, ë¡œê·¸ì¸, Firebase, JWT) |
| 2 | `admin-routes.ts` | ê´€ë¦¬ì ì „ìš© API (ì‚¬ìš©ì/ë³‘ì›/ì»¨ì…‰/ë°°ë„ˆ ê´€ë¦¬) |
| 3 | `hospital-routes.ts` | ë³‘ì› ì •ë³´, QR ì½”ë“œ ìƒì„±/ê²€ì¦ |
| 4 | `music-engine-routes.ts` | AI ìŒì•… ìƒì„± (TopMediai, Suno) |
| 5 | `image.ts` | AI ì´ë¯¸ì§€ ìƒì„± ë° ë³€í™˜ |
| 6 | `collage.ts` | ì½œë¼ì£¼ ìƒì„± ë° ë‹¤ìš´ë¡œë“œ |
| 7 | `gallery.ts` | ì‚¬ìš©ì ê°¤ëŸ¬ë¦¬ ê´€ë¦¬ (ì¦ê²¨ì°¾ê¸°, ê³µìœ , ì‚­ì œ) |
| 8 | `milestone-routes.ts` | ë§ˆì¼ìŠ¤í†¤ ì‹ ì²­ ë° íŒŒì¼ ì—…ë¡œë“œ |
| 9 | `chat-routes.ts` | AI ì±„íŒ… ë° ì±„íŒ… ì´ë ¥ ì €ì¥ |
| 10 | `concepts.ts` | ì»¨ì…‰ ì¹´í…Œê³ ë¦¬ ë° ì¶”ì²œ |
| 11 | `google-oauth.ts` | Google OAuth2 ì¸ì¦ |
| 12 | `user-settings.ts` | ì‚¬ìš©ì ì„¤ì • (ì•Œë¦¼, í…Œë§ˆ, ì–¸ì–´) |
| 13 | `profile.ts` | ì„ì‹  í”„ë¡œí•„ ê´€ë¦¬ |
| 14 | `service-catalog.ts` | ì„œë¹„ìŠ¤ ì¹´íƒˆë¡œê·¸ (ë©”ë‰´ êµ¬ì¡°) |
| 15 | `public-routes.ts` | ê³µê°œ ì •ë³´ (ë°°ë„ˆ, ë©”ë‰´, ë³‘ì› ëª©ë¡) |
| 16 | `exports.ts` | ì±„íŒ… ì´ë ¥ ë‚´ë³´ë‚´ê¸° (HTML/í…ìŠ¤íŠ¸) |
| 17 | `misc-routes.ts` | ì‹œìŠ¤í…œ ì„¤ì •, ëª¨ë¸ ê¸°ëŠ¥ ì¡°íšŒ |
| 18 | `banner-migration.ts` | PRIVATEâ†’PUBLIC GCS ë§ˆì´ê·¸ë ˆì´ì…˜ |
| 19 | `placeholder.ts` | SVG í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ ì„œë¹™ |
| 20 | `test-routes.ts` | ê°œë°œ/í…ŒìŠ¤íŠ¸ ì „ìš© ì—”ë“œí¬ì¸íŠ¸ |
| 21 | `upload.ts` | GCS íŒŒì¼ ì—…ë¡œë“œ (PUBLIC ì €ì¥ì†Œ) |

### 2.2 API ì—”ë“œí¬ì¸íŠ¸ ì „ì²´ ëª…ì„¸

#### 2.2.1 ì¸ì¦ ê´€ë ¨ API (auth.ts, google-oauth.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/auth/check-username/:username` | âŒ | ì‚¬ìš©ìëª… ì¤‘ë³µ ì²´í¬ | N/A | `{ "available": boolean, "message": string }` |
| POST | `/api/auth/register` | âŒ | ì‹ ê·œ ì‚¬ìš©ì íšŒì›ê°€ì… | `{ "username", "password", "email", "fullName", "phoneNumber", "birthdate", "hospitalId", "promoCode" }` | `{ "user": {...}, "accessToken", "message" }` |
| POST | `/api/auth/login` | âŒ | ì‚¬ìš©ì ë¡œê·¸ì¸ | `{ "username", "password" }` | `{ "accessToken", "user": {...} }` |
| POST | `/api/auth/logout` | âœ… | ë¡œê·¸ì•„ì›ƒ | N/A | `{ "message": "ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤" }` |
| GET | `/api/auth/me` | âœ… | í˜„ì¬ ë¡œê·¸ì¸ ì‚¬ìš©ì ì •ë³´ | N/A | `{ "success": true, "user": {...} }` |
| PUT | `/api/auth/profile` | âœ… | í”„ë¡œí•„ ì—…ë°ì´íŠ¸ | `{ "fullName", "email", "phoneNumber", "dueDate", "birthdate" }` | `{ "success": true, "user": {...} }` |
| POST | `/api/auth/firebase` | âŒ | Firebase ì†Œì…œ ë¡œê·¸ì¸ | `{ "firebaseToken" }` | `{ "user": {...}, "token", "isNewUser" }` |
| POST | `/api/auth/forgot-password` | âŒ | ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­ | `{ "identifier" }` | `{ "success": true, "message" }` |
| POST | `/api/auth/reset-password` | âŒ | ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • | `{ "token", "newPassword" }` | `{ "success": true, "message" }` |
| GET | `/api/google-oauth/login` | âŒ | Google OAuth ë¡œê·¸ì¸ URL ìƒì„± | N/A | `{ "success": true, "authUrl": "..." }` |
| GET | `/api/google-oauth/callback` | âŒ | Google OAuth ì½œë°± ì²˜ë¦¬ | Query: `code` | Redirect ë˜ëŠ” JWT ì‘ë‹µ |
| POST | `/api/auth/complete-profile` | âœ… | í”„ë¡œí•„ ì™„ì„± (Firebase ì‹ ê·œ ì‚¬ìš©ì) | `{ "fullName", "phoneNumber", "dueDate" }` | `{ "success": true, "user": {...} }` |
| PUT | `/api/auth/change-password` | âœ… | ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ | `{ "currentPassword", "newPassword" }` | `{ "success": true }` |

#### 2.2.2 ìŒì•… ìƒì„± API (music-engine-routes.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| POST | `/api/music-engine/generate` | âœ… (Premium) | AI ìŒì•… ìƒì„± ìš”ì²­ | `{ "prompt", "title", "style", "instrumental", "duration", "gender", "generateLyrics", "preferredEngine" }` | `{ "success": true, "data": { "musicId", "engine", "status", "fallbackUsed", "title", "lyrics" } }` |
| GET | `/api/music-engine/status/:id` | âœ… | ìŒì•… ìƒì„± ìƒíƒœ í™•ì¸ | N/A | `{ "success": true, "status", "url", "progress" }` |
| GET | `/api/music-engine/list` | âœ… | ë‚´ ìŒì•… ëª©ë¡ ì¡°íšŒ | Query: `?page=1&limit=10&filter=all/favorites` | `{ "success": true, "data": [...], "pagination": {...} }` |
| GET | `/api/music-engine/styles` | âŒ | ìŒì•… ìŠ¤íƒ€ì¼ ëª©ë¡ | N/A | `[{ "id", "value", "label", "description", "promptTemplate" }]` |
| DELETE | `/api/music-engine/:id` | âœ… | ìŒì•… ì‚­ì œ | N/A | `{ "success": true }` |
| GET | `/api/music/stream/:id` | âŒ | ìŒì•… ìŠ¤íŠ¸ë¦¬ë° | N/A | Audio stream |

#### 2.2.3 ì´ë¯¸ì§€ ìƒì„± API (image.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| POST | `/api/images/transform` | âœ… | AI ì´ë¯¸ì§€ ë³€í™˜ | `{ "imageUrl", "conceptId", "style", "model", "userId" }` | `{ "success": true, "transformedUrl", "thumbnailUrl", "id" }` |
| POST | `/api/images/generate` | âœ… | AI ì´ë¯¸ì§€ ìƒì„± | `{ "prompt", "model", "userId" }` | `{ "success": true, "imageUrl", "id" }` |
| DELETE | `/api/images/:id` | âœ… | ì´ë¯¸ì§€ ì‚­ì œ | N/A | `{ "success": true }` |
| POST | `/api/images/upload-public` | âœ… | ê³µê°œ ì´ë¯¸ì§€ ì—…ë¡œë“œ | FormData: `file` | `{ "success": true, "publicUrl", "gcsPath" }` |
| POST | `/api/images/download` | âœ… | ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ URL ìƒì„± | `{ "imageUrl" }` | `{ "success": true, "downloadUrl" }` |

#### 2.2.4 ì½œë¼ì£¼ API (collage.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| POST | `/api/collage/create` | âœ… | ì½œë¼ì£¼ ì„¸ì…˜ ìƒì„± | `{ "imageIds": [1,2,3,...], "layout": "2/6/12/24", "resolution": "web/high/print", "format": "png/jpg/webp" }` | `{ "sessionId", "metadata": {...} }` |
| GET | `/api/collage/generate/:sessionId` | âœ… | ì½œë¼ì£¼ ìƒì„± | N/A | `{ "success": true, "collageUrl", "sessionId" }` |
| POST | `/api/collage/download` | âœ… | ì½œë¼ì£¼ ë‹¤ìš´ë¡œë“œ | `{ "dataUrl", "title", "style" }` | `{ "success": true, "url", "id" }` |
| GET | `/api/collage/gallery` | âœ… | ì½œë¼ì£¼ ê°¤ëŸ¬ë¦¬ | N/A | `{ "collages": [...] }` |
| DELETE | `/api/collage/:id` | âœ… | ì½œë¼ì£¼ ì‚­ì œ | N/A | `{ "success": true }` |

#### 2.2.5 ê°¤ëŸ¬ë¦¬ API (gallery.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/gallery` | âœ… | ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ ì¡°íšŒ | Query: `?filter=all/favorites&page=1&limit=20` | `{ "images": [...], "total": 100, "page": 1 }` |
| POST | `/api/gallery/favorite` | âœ… | ì¦ê²¨ì°¾ê¸° í† ê¸€ | `{ "itemId": 123, "type": "music/image" }` | `{ "success": true, "isFavorite": true }` |
| POST | `/api/gallery/share` | âœ… | ë¯¸ë””ì–´ ê³µìœ  | `{ "id": 123, "type": "music/image" }` | `{ "success": true, "shareUrl": "..." }` |
| DELETE | `/api/gallery/image/:id` | âœ… | ì´ë¯¸ì§€ ì‚­ì œ | N/A | `{ "success": true }` |
| DELETE | `/api/gallery/music/:id` | âœ… | ìŒì•… ì‚­ì œ | N/A | `{ "success": true }` |

#### 2.2.6 ì±„íŒ… API (chat-routes.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| POST | `/api/chat` | âœ… | AI ì±„íŒ… ë©”ì‹œì§€ ì „ì†¡ | `{ "message", "personaSystemPrompt", "conversationId" }` | `{ "response": "...", "conversationId": "..." }` |
| POST | `/api/chat/save` | âœ… | ì±„íŒ… ì´ë ¥ ì €ì¥ | `{ "title", "messages": [...], "personaId" }` | `{ "success": true, "chatId": 123 }` |
| GET | `/api/chat/saved` | âœ… | ì €ì¥ëœ ì±„íŒ… ëª©ë¡ | N/A | `{ "chats": [...] }` |
| GET | `/api/chat/:id` | âœ… | ì±„íŒ… ìƒì„¸ ì¡°íšŒ | N/A | `{ "chat": {...}, "messages": [...] }` |
| DELETE | `/api/chat/:id` | âœ… | ì±„íŒ… ì‚­ì œ | N/A | `{ "success": true }` |

#### 2.2.7 ë§ˆì¼ìŠ¤í†¤ API (milestone-routes.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/milestones` | âŒ | ë§ˆì¼ìŠ¤í†¤ ëª©ë¡ ì¡°íšŒ | Query: `?categoryId=1` | `{ "milestones": [...] }` |
| GET | `/api/milestones/categories` | âŒ | ë§ˆì¼ìŠ¤í†¤ ì¹´í…Œê³ ë¦¬ ëª©ë¡ | N/A | `{ "categories": [...] }` |
| GET | `/api/milestones/user-progress` | âœ… | ë‚´ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ìƒí™© | N/A | `{ "progress": [...], "stats": {...} }` |
| POST | `/api/milestones/:id/apply` | âœ… | ë§ˆì¼ìŠ¤í†¤ ì‹ ì²­ | `{ "applicationData": {...} }` | `{ "success": true, "application": {...} }` |
| GET | `/api/milestone-applications` | âœ… | ë‚´ ì‹ ì²­ ëª©ë¡ | N/A | `{ "applications": [...] }` |
| POST | `/api/milestone-applications/:id/files` | âœ… | íŒŒì¼ ì—…ë¡œë“œ | FormData: `file` | `{ "success": true, "file": {...} }` |
| GET | `/api/milestone-applications/:id/files` | âœ… | íŒŒì¼ ëª©ë¡ ì¡°íšŒ | N/A | `{ "files": [...], "stats": {...} }` |
| DELETE | `/api/milestone-applications/:id/files/:fileId` | âœ… | íŒŒì¼ ì‚­ì œ | N/A | `{ "success": true }` |

#### 2.2.8 ê´€ë¦¬ì API (admin-routes.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/admin/users` | ğŸ” Admin | ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ | Query: `?search=&memberType=&hospitalId=&page=1&limit=50` | `{ "users": [...], "total": 167 }` |
| PUT | `/api/admin/users/:id` | ğŸ” Admin | ì‚¬ìš©ì ì •ë³´ ìˆ˜ì • | `{ "memberType", "hospitalId", "isActive" }` | `{ "success": true, "user": {...} }` |
| DELETE | `/api/admin/users/:id` | ğŸ” Admin | ì‚¬ìš©ì ì‚­ì œ | N/A | `{ "success": true }` |
| GET | `/api/admin/hospitals` | ğŸ” Admin | ë³‘ì› ëª©ë¡ ì¡°íšŒ | N/A | `{ "success": true, "data": [...] }` |
| POST | `/api/admin/hospitals` | ğŸ” Admin | ë³‘ì› ë“±ë¡ | `{ "name", "slug", "address", "phone", "email" }` | `{ "success": true, "hospital": {...} }` |
| PUT | `/api/admin/hospitals/:id` | ğŸ” Admin | ë³‘ì› ì •ë³´ ìˆ˜ì • | `{ "name", "isActive", "packageType" }` | `{ "success": true, "hospital": {...} }` |
| PATCH | `/api/admin/hospitals/:id/status` | ğŸ” Admin | ë³‘ì› í™œì„±í™” ìƒíƒœ ë³€ê²½ | `{ "isActive": true/false }` | `{ "success": true }` |
| GET | `/api/admin/hospital-codes` | ğŸ” Admin | ë³‘ì› ì½”ë“œ ëª©ë¡ ì¡°íšŒ | N/A | `[{ "id", "hospitalId", "code", "codeType", ... }]` |
| POST | `/api/admin/hospital-codes` | ğŸ” Admin | ë³‘ì› ì½”ë“œ ìƒì„± | `{ "hospitalId", "code", "codeType", "maxUsage", "isQREnabled", "qrDescription", "expiresAt" }` | `{ "id", "code", ... }` |
| DELETE | `/api/admin/hospital-codes/:id` | ğŸ” Admin | ë³‘ì› ì½”ë“œ ì‚­ì œ | N/A | `{ "success": true }` |
| PATCH | `/api/admin/hospital-codes/:id/status` | ğŸ” Admin | ì½”ë“œ í™œì„±í™” ìƒíƒœ ë³€ê²½ | `{ "isActive": true/false }` | `{ "success": true }` |
| GET | `/api/admin/concepts` | ğŸ” Admin | ì»¨ì…‰ ëª©ë¡ ì¡°íšŒ | N/A | `{ "concepts": [...] }` |
| POST | `/api/admin/concepts` | ğŸ” Admin | ì»¨ì…‰ ìƒì„± | `{ "conceptId", "title", "description", "promptTemplate", "categoryId" }` | `{ "success": true, "concept": {...} }` |
| PUT | `/api/admin/concepts/:id` | ğŸ” Admin | ì»¨ì…‰ ìˆ˜ì • | `{ "title", "isActive", "order" }` | `{ "success": true }` |
| POST | `/api/admin/concepts/reorder` | ğŸ” Admin | ì»¨ì…‰ ìˆœì„œ ë³€ê²½ | `[{ "id": 1, "order": 0 }, ...]` | `{ "success": true }` |
| GET | `/api/admin/banners` | ğŸ” Admin | ë°°ë„ˆ ëª©ë¡ ì¡°íšŒ | N/A | `{ "banners": [...] }` |
| POST | `/api/admin/banners` | ğŸ” Admin | ë°°ë„ˆ ìƒì„± (ì´ë¯¸ì§€ ì—…ë¡œë“œ) | FormData: `file, title, description, linkUrl` | `{ "success": true, "banner": {...} }` |
| PUT | `/api/admin/banners/:id` | ğŸ” Admin | ë°°ë„ˆ ìˆ˜ì • | `{ "title", "description", "linkUrl", "isActive", "order" }` | `{ "success": true }` |
| DELETE | `/api/admin/banners/:id` | ğŸ” Admin | ë°°ë„ˆ ì‚­ì œ | N/A | `{ "success": true }` |
| GET | `/api/admin/music-styles` | ğŸ” Admin | ìŒì•… ìŠ¤íƒ€ì¼ ëª©ë¡ | N/A | `{ "styles": [...] }` |
| POST | `/api/admin/music-styles` | ğŸ” Admin | ìŒì•… ìŠ¤íƒ€ì¼ ìƒì„± | `{ "styleId", "name", "description", "promptTemplate" }` | `{ "success": true }` |
| PUT | `/api/admin/music-styles/:id` | ğŸ” Admin | ìŒì•… ìŠ¤íƒ€ì¼ ìˆ˜ì • | `{ "name", "isActive", "order" }` | `{ "success": true }` |
| GET | `/api/admin/ab-tests` | ğŸ” Admin | A/B í…ŒìŠ¤íŠ¸ ëª©ë¡ | N/A | `{ "tests": [...] }` |
| POST | `/api/admin/ab-tests` | ğŸ” Admin | A/B í…ŒìŠ¤íŠ¸ ìƒì„± | `{ "name", "description", "targetType", "variants": [...] }` | `{ "success": true }` |
| GET | `/api/admin/ab-tests/:id/results` | ğŸ” Admin | A/B í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì¡°íšŒ | N/A | `{ "results": [...], "winner": {...} }` |
| POST | `/api/admin/gcs/delete-image` | ğŸ” Admin | GCS ì´ë¯¸ì§€ ì‚­ì œ | `{ "gcsPath": "images/..." }` | `{ "success": true }` |
| GET | `/api/admin/system-settings` | ğŸ” Admin | ì‹œìŠ¤í…œ ì„¤ì • ì¡°íšŒ | N/A | `{ "settings": {...} }` |
| PUT | `/api/admin/system-settings` | ğŸ” Admin | ì‹œìŠ¤í…œ ì„¤ì • ì—…ë°ì´íŠ¸ | `{ "key": "value", ... }` | `{ "success": true }` |

#### 2.2.9 ë³‘ì› ê´€ë¦¬ API (hospital-routes.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/hospital/info` | ğŸ¥ Hospital Admin | ë³‘ì› ì •ë³´ ì¡°íšŒ | N/A | `{ "success": true, "data": {...} }` |
| GET | `/api/hospitals` | âŒ | í™œì„±í™”ëœ ë³‘ì› ëª©ë¡ (ê³µê°œ) | N/A | `[{ "id", "name", "slug", "address", ... }]` |
| GET | `/api/qr/hospital/:hospitalId/:codeId` | âŒ | QR ì½”ë“œ ë°ì´í„° ì¡°íšŒ (ê³µê°œ) | N/A | `{ "qrData": "...", "description": "...", "codeType": "...", "remainingSlots": 10 }` |
| GET | `/api/qr/generate/:hospitalId/:codeId` | ğŸ” Admin | QR ì½”ë“œ ì´ë¯¸ì§€ ìƒì„± | N/A | PNG ì´ë¯¸ì§€ (Binary) |
| GET | `/api/qr/data/:hospitalId/:codeId` | ğŸ” Admin | QR ì½”ë“œ ë°ì´í„° ì¡°íšŒ (ê´€ë¦¬ì) | N/A | `{ "success": true, "qrData": {...}, "qrString": "...", "imageUrl": "..." }` |
| POST | `/api/qr/verify` | âŒ | QR ì½”ë“œ ìŠ¤ìº” ê²€ì¦ | `{ "qrData": "{...}" }` | `{ "success": true, "hospital": {...}, "code": "...", "autoFill": {...} }` |

#### 2.2.10 ì»¨ì…‰ ê´€ë¦¬ API (concepts.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/concepts/categories` | âŒ | ì»¨ì…‰ ì¹´í…Œê³ ë¦¬ ëª©ë¡ | N/A | `{ "categories": [...] }` |
| GET | `/api/concepts` | âŒ | í™œì„± ì»¨ì…‰ ëª©ë¡ | Query: `?categoryId=1` | `{ "concepts": [...] }` |
| GET | `/api/concepts/:conceptId` | âŒ | ì»¨ì…‰ ìƒì„¸ ì¡°íšŒ | N/A | `{ "concept": {...} }` |
| POST | `/api/personas/recommend` | âœ… | í˜ë¥´ì†Œë‚˜ ì¶”ì²œ | `{ "userContext": "..." }` | `{ "personas": [...] }` |

#### 2.2.11 ì‚¬ìš©ì ì„¤ì • API (user-settings.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/user-settings` | âœ… | ì‚¬ìš©ì ì„¤ì • ì¡°íšŒ | N/A | `{ "settings": { "theme", "language", "timezone", ... } }` |
| PUT | `/api/user-settings` | âœ… | ì‚¬ìš©ì ì„¤ì • ì—…ë°ì´íŠ¸ | `{ "theme", "language", "autoSave" }` | `{ "success": true }` |
| GET | `/api/user-settings/notifications` | âœ… | ì•Œë¦¼ ì„¤ì • ì¡°íšŒ | N/A | `{ "settings": { "emailNotifications", "pushNotifications", ... } }` |
| PUT | `/api/user-settings/notifications` | âœ… | ì•Œë¦¼ ì„¤ì • ì—…ë°ì´íŠ¸ | `{ "emailNotifications", "pregnancyReminders" }` | `{ "success": true }` |

#### 2.2.12 í”„ë¡œí•„ API (profile.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/profile/pregnancy` | âœ… | ì„ì‹  í”„ë¡œí•„ ì¡°íšŒ | N/A | `{ "profile": {...} }` |
| POST | `/api/profile/pregnancy` | âœ… | ì„ì‹  í”„ë¡œí•„ ìƒì„± | `{ "dueDate", "babyName", "babyGender" }` | `{ "success": true, "profile": {...} }` |
| PUT | `/api/profile/pregnancy` | âœ… | ì„ì‹  í”„ë¡œí•„ ì—…ë°ì´íŠ¸ | `{ "dueDate", "babyName" }` | `{ "success": true }` |

#### 2.2.13 ê³µê°œ ì •ë³´ API (public-routes.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/banners` | âŒ | ìŠ¬ë¼ì´ë“œ ë°°ë„ˆ ëª©ë¡ (PUBLIC) | N/A | `[{ "id", "title", "imageSrc", "href", ... }]` |
| GET | `/api/small-banners` | âŒ | ì†Œí˜• ë°°ë„ˆ ëª©ë¡ (PUBLIC) | N/A | `[{ "id", "title", "imageUrl", "linkUrl", ... }]` |
| GET | `/api/menu` | âŒ | ë©”ë‰´ í•­ëª© ëª©ë¡ | N/A | `[{ "id", "title", "icon", "items": [...] }]` |
| POST | `/api/chat` | âœ… | AI ì±„íŒ… (Publicìš©) | `{ "message", "personaSystemPrompt" }` | `{ "response": "..." }` |
| POST | `/api/music/generate` | âœ… (Premium) | AI ìŒì•… ìƒì„± (Publicìš©) | `{ "prompt", "style" }` | `{ "success": true, "musicId": 123 }` |

#### 2.2.14 ì„œë¹„ìŠ¤ ì¹´íƒˆë¡œê·¸ API (service-catalog.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/service-categories` | âŒ | ì„œë¹„ìŠ¤ ì¹´í…Œê³ ë¦¬ ëª©ë¡ | N/A | `{ "categories": [...] }` |
| GET | `/api/service-items` | âŒ | ì„œë¹„ìŠ¤ í•­ëª© ëª©ë¡ | Query: `?categoryId=1` | `{ "items": [...] }` |

#### 2.2.15 ë°ì´í„° ë‚´ë³´ë‚´ê¸° API (exports.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| POST | `/api/export/chat-html` | âœ… | ì±„íŒ… ì´ë ¥ HTML ë‚´ë³´ë‚´ê¸° | `{ "chatId": 123 }` | HTML íŒŒì¼ ë‹¤ìš´ë¡œë“œ |
| POST | `/api/export/chat-text` | âœ… | ì±„íŒ… ì´ë ¥ í…ìŠ¤íŠ¸ ë‚´ë³´ë‚´ê¸° | `{ "chatId": 123 }` | í…ìŠ¤íŠ¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œ |
| GET | `/api/export/banners` | ğŸ” Admin | ë°°ë„ˆ ì •ë³´ ì¡°íšŒ | N/A | `{ "banners": [...] }` |

#### 2.2.16 ê¸°íƒ€ ìœ í‹¸ë¦¬í‹° API (misc-routes.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/system-settings` | âŒ | ì‹œìŠ¤í…œ ì„¤ì • ì¡°íšŒ (ê³µê°œ) | N/A | `{ "settings": {...} }` |
| GET | `/api/model-capabilities` | âŒ | AI ëª¨ë¸ ê¸°ëŠ¥ ì¡°íšŒ | N/A | `{ "models": { "openai": {...}, "gemini": {...} } }` |
| GET | `/placeholder` | âŒ | SVG í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ | Query: `?style=ghibli&text=ë¡œë”©ì¤‘&error=false` | SVG ì´ë¯¸ì§€ |
| GET | `/embed/concept-gallery` | âŒ | ì»¨ì…‰ ê°¤ëŸ¬ë¦¬ ì„ë² ë“œ ìŠ¤í¬ë¦½íŠ¸ | N/A | JavaScript íŒŒì¼ |

#### 2.2.17 ë°°ë„ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ API (banner-migration.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| GET | `/api/banner-migration/check-private-banners` | âŒ | PRIVATE ë°°ë„ˆ ê²€ì‚¬ | N/A | `{ "slideBanners": {...}, "smallBanners": {...}, "needsPrivateToPublicMigration": boolean }` |
| POST | `/api/banner-migration/migrate-slide-banners` | ğŸ” Admin | ìŠ¬ë¼ì´ë“œ ë°°ë„ˆ PRIVATEâ†’PUBLIC ë§ˆì´ê·¸ë ˆì´ì…˜ | N/A | `{ "results": [...], "summary": {...} }` |
| POST | `/api/banner-migration/migrate-small-banners` | ğŸ” Admin | ì†Œí˜• ë°°ë„ˆ PRIVATEâ†’PUBLIC ë§ˆì´ê·¸ë ˆì´ì…˜ | N/A | `{ "results": [...], "summary": {...} }` |

#### 2.2.18 íŒŒì¼ ì—…ë¡œë“œ API (upload.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| POST | `/api/upload` | ğŸ” Admin | GCS íŒŒì¼ ì—…ë¡œë“œ (PUBLIC) | FormData: `file` | `{ "success": true, "signedUrl": "...", "publicUrl": "...", "gcsPath": "..." }` |
| POST | `/api/upload/test` | ğŸ” Admin | GCS ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ | FormData: `file` | `{ "success": true, "signedUrl": "...", "publicUrl": "..." }` |

#### 2.2.19 í…ŒìŠ¤íŠ¸ API (test-routes.ts)

| HTTP Method | URL Path | ì¸ì¦ | ì„¤ëª… | Request Body | Success Response |
|------------|----------|------|------|--------------|------------------|
| POST | `/api/test/gcs-upload` | ğŸ” Admin | GCS ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ | FormData: `file` | `{ "success": true, "url": "..." }` |
| GET | `/api/test/permission` | âœ… | ê¶Œí•œ í…ŒìŠ¤íŠ¸ | N/A | `{ "user": {...}, "hasPermission": true }` |
| GET | `/api/test/schema` | ğŸ” Admin | ìŠ¤í‚¤ë§ˆ ì •ë³´ ì¡°íšŒ | N/A | `{ "tables": [...], "relations": [...] }` |
| GET | `/api/test/multer-config` | ğŸ” Admin | Multer ì„¤ì • í™•ì¸ | N/A | `{ "config": {...} }` |

---

### 2.3 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (38ê°œ í…Œì´ë¸”)

#### 2.3.1 ì‚¬ìš©ì ê´€ë¦¬ í…Œì´ë¸” (4ê°œ)

**users í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì‚¬ìš©ì ê³ ìœ  ID |
| username | TEXT | UNIQUE, NOT NULL | ì‚¬ìš©ì ë¡œê·¸ì¸ ì•„ì´ë”” |
| password | TEXT | | í•´ì‹±ëœ ë¹„ë°€ë²ˆí˜¸ (ì†Œì…œ ë¡œê·¸ì¸ì€ NULL ê°€ëŠ¥) |
| email | VARCHAR(255) | UNIQUE | ì‚¬ìš©ì ì´ë©”ì¼ |
| fullName | VARCHAR(100) | | ì „ì²´ ì´ë¦„ |
| emailVerified | BOOLEAN | DEFAULT false | ì´ë©”ì¼ ì¸ì¦ ì—¬ë¶€ |
| memberType | VARCHAR(20) | DEFAULT 'free' | íšŒì› ë“±ê¸‰ (free, pro, membership, hospital_admin, admin, superadmin) |
| hospitalId | INTEGER | FOREIGN KEY | ì†Œì† ë³‘ì› ID |
| promoCode | VARCHAR(50) | | í”„ë¡œëª¨ì…˜ ì½”ë“œ |
| lastLogin | TIMESTAMP | | ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„ |
| phoneNumber | VARCHAR(20) | | ì „í™”ë²ˆí˜¸ |
| dueDate | TIMESTAMP | | ì¶œì‚° ì˜ˆì •ì¼ |
| birthdate | TIMESTAMP | | ìƒë…„ì›”ì¼ |
| firebaseUid | VARCHAR(128) | UNIQUE | Firebase ê³ ìœ  ID |
| needProfileComplete | BOOLEAN | DEFAULT true | í”„ë¡œí•„ ì™„ì„± í•„ìš” ì—¬ë¶€ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**user_notification_settings í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì„¤ì • ID |
| userId | INTEGER | FOREIGN KEY, NOT NULL | ì‚¬ìš©ì ID |
| emailNotifications | BOOLEAN | DEFAULT true | ì´ë©”ì¼ ì•Œë¦¼ í—ˆìš© |
| pushNotifications | BOOLEAN | DEFAULT true | í‘¸ì‹œ ì•Œë¦¼ í—ˆìš© |
| pregnancyReminders | BOOLEAN | DEFAULT true | ì„ì‹  ë¦¬ë§ˆì¸ë” í—ˆìš© |
| weeklyUpdates | BOOLEAN | DEFAULT true | ì£¼ê°„ ì—…ë°ì´íŠ¸ í—ˆìš© |
| promotionalEmails | BOOLEAN | DEFAULT false | í™ë³´ ì´ë©”ì¼ í—ˆìš© |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**user_settings í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì„¤ì • ID |
| userId | INTEGER | FOREIGN KEY, NOT NULL | ì‚¬ìš©ì ID |
| theme | VARCHAR(20) | DEFAULT 'light' | í…Œë§ˆ (light, dark, system) |
| language | VARCHAR(10) | DEFAULT 'ko' | ì–¸ì–´ (ko, en) |
| timezone | VARCHAR(50) | DEFAULT 'Asia/Seoul' | íƒ€ì„ì¡´ |
| dateFormat | VARCHAR(20) | DEFAULT 'YYYY-MM-DD' | ë‚ ì§œ í˜•ì‹ |
| autoSave | BOOLEAN | DEFAULT true | ìë™ ì €ì¥ |
| showTutorials | BOOLEAN | DEFAULT true | íŠœí† ë¦¬ì–¼ í‘œì‹œ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**pregnancy_profiles í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | í”„ë¡œí•„ ID |
| userId | INTEGER | FOREIGN KEY, UNIQUE, NOT NULL | ì‚¬ìš©ì ID |
| dueDate | TIMESTAMP | NOT NULL | ì¶œì‚° ì˜ˆì •ì¼ |
| babyName | VARCHAR(100) | | ì•„ê¸° ì´ë¦„ |
| babyGender | VARCHAR(10) | | ì•„ê¸° ì„±ë³„ |
| pregnancyWeek | INTEGER | | ì„ì‹  ì£¼ì°¨ |
| lastMenstrualPeriod | TIMESTAMP | | ë§ˆì§€ë§‰ ìƒë¦¬ì¼ |
| isMultiple | BOOLEAN | DEFAULT false | ë‹¤íƒœì•„ ì—¬ë¶€ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

#### 2.3.2 ë³‘ì› ê´€ë¦¬ í…Œì´ë¸” (5ê°œ)

**hospitals í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ë³‘ì› ê³ ìœ  ID |
| name | TEXT | NOT NULL | ë³‘ì› ì´ë¦„ |
| slug | TEXT | UNIQUE, NOT NULL | ë³‘ì› URL ìŠ¬ëŸ¬ê·¸ |
| address | TEXT | | ë³‘ì› ì£¼ì†Œ |
| phone | TEXT | | ë³‘ì› ì „í™”ë²ˆí˜¸ |
| email | TEXT | | ë³‘ì› ì´ë©”ì¼ |
| domain | TEXT | | ì»¤ìŠ¤í…€ ë„ë©”ì¸ |
| logoUrl | TEXT | | ë³‘ì› ë¡œê³  URL |
| themeColor | TEXT | | í…Œë§ˆ ìƒ‰ìƒ |
| contractStartDate | TIMESTAMP | | ê³„ì•½ ì‹œì‘ì¼ |
| contractEndDate | TIMESTAMP | | ê³„ì•½ ì¢…ë£Œì¼ |
| packageType | TEXT | DEFAULT 'basic' | íŒ¨í‚¤ì§€ íƒ€ì… (basic, premium, enterprise) |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**hospital_codes í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì½”ë“œ ê³ ìœ  ID |
| hospitalId | INTEGER | FOREIGN KEY, NOT NULL | ë³‘ì› ID |
| code | VARCHAR(20) | UNIQUE, NOT NULL | ì¸ì¦ ì½”ë“œ (8ì ìë™ìƒì„±) |
| codeType | VARCHAR(20) | NOT NULL | ì½”ë“œ íƒ€ì… (master, limited, qr_unlimited, qr_limited) |
| maxUsage | INTEGER | | ìµœëŒ€ ì‚¬ìš© íšŸìˆ˜ (NULL = ë¬´ì œí•œ) |
| currentUsage | INTEGER | DEFAULT 0 | í˜„ì¬ ì‚¬ìš© íšŸìˆ˜ |
| isQREnabled | BOOLEAN | DEFAULT false | QR ì½”ë“œ í™œì„±í™” |
| qrDescription | VARCHAR(100) | | QR ì½”ë“œ ì„¤ëª… |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| expiresAt | TIMESTAMP | | ë§Œë£Œ ì‹œê°„ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**hospital_members í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ê´€ê³„ ID |
| userId | INTEGER | FOREIGN KEY | ì‚¬ìš©ì ID |
| hospitalId | INTEGER | FOREIGN KEY | ë³‘ì› ID |
| role | TEXT | DEFAULT 'patient' | ì—­í•  (patient, staff) |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |

**roles í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì—­í•  ID |
| name | TEXT | UNIQUE, NOT NULL | ì—­í•  ì´ë¦„ (user, admin, hospital_admin, superadmin) |
| description | TEXT | | ì—­í•  ì„¤ëª… |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**user_roles í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ë§¤í•‘ ID |
| userId | INTEGER | FOREIGN KEY, NOT NULL | ì‚¬ìš©ì ID |
| roleId | INTEGER | FOREIGN KEY, NOT NULL | ì—­í•  ID |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |

#### 2.3.3 ì¸ì¦ ë° ì„¸ì…˜ í…Œì´ë¸” (2ê°œ)

**refresh_tokens í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | í† í° ID |
| userId | INTEGER | FOREIGN KEY, NOT NULL | ì‚¬ìš©ì ID |
| token | TEXT | NOT NULL | ë¦¬í”„ë ˆì‹œ í† í° |
| expiresAt | TIMESTAMP | NOT NULL | ë§Œë£Œ ì‹œê°„ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |

**password_reset_tokens í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | í† í° ID |
| userId | INTEGER | FOREIGN KEY, NOT NULL | ì‚¬ìš©ì ID |
| token | TEXT | UNIQUE, NOT NULL | ì¬ì„¤ì • í† í° |
| expiresAt | TIMESTAMP | NOT NULL | ë§Œë£Œ ì‹œê°„ |
| usedAt | TIMESTAMP | | ì‚¬ìš© ì‹œê°„ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |

#### 2.3.4 AI ì»¨í…ì¸  ìƒì„± í…Œì´ë¸” (6ê°œ)

**music í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ìŒì•… ê³ ìœ  ID |
| title | TEXT | NOT NULL | ìŒì•… ì œëª© |
| prompt | TEXT | NOT NULL | ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ |
| style | TEXT | | ìŒì•… ìŠ¤íƒ€ì¼ |
| translatedPrompt | TEXT | | ì˜ì–´ ë²ˆì—­ í”„ë¡¬í”„íŠ¸ |
| tags | JSONB | DEFAULT '[]' | ìŠ¤íƒ€ì¼ íƒœê·¸ |
| url | TEXT | | ìµœì¢… ì˜¤ë””ì˜¤ íŒŒì¼ URL (GCS PUBLIC) |
| lyrics | TEXT | | ìƒì„±ëœ ê°€ì‚¬ |
| instrumental | BOOLEAN | DEFAULT false | ë°˜ì£¼ ì „ìš© ì—¬ë¶€ |
| duration | INTEGER | DEFAULT 60 | ìŒì•… ê¸¸ì´(ì´ˆ) |
| userId | INTEGER | | ì‚¬ìš©ì ID |
| provider | TEXT | DEFAULT 'topmedia' | ìŒì•… ìƒì„± ì œê³µì |
| creditUsed | INTEGER | DEFAULT 1 | ì‚¬ìš©ëœ í¬ë ˆë”§ |
| engine | VARCHAR(20) | DEFAULT 'topmedia' | ì‚¬ìš©ëœ ì—”ì§„ (topmedia, suno) |
| engineTaskId | VARCHAR(100) | | ì—”ì§„ë³„ ì‘ì—… ID |
| fallbackUsed | BOOLEAN | DEFAULT false | í´ë°± ì—”ì§„ ì‚¬ìš© ì—¬ë¶€ |
| gcsPath | VARCHAR(500) | | GCS ì €ì¥ ê²½ë¡œ (PUBLIC) |
| contentType | VARCHAR(50) | DEFAULT 'audio/mpeg' | MIME íƒ€ì… |
| durationSec | INTEGER | | ì‹¤ì œ ìŒì•… ê¸¸ì´(ì´ˆ) |
| status | TEXT | DEFAULT 'pending' | ìƒì„± ìƒíƒœ (pending, processing, done, error) |
| songId | TEXT | | TopMediai song_id |
| generateLyrics | BOOLEAN | DEFAULT false | ê°€ì‚¬ ìë™ ìƒì„± ì—¬ë¶€ |
| gender | TEXT | | ê°€ìˆ˜ ì„±ë³„ (female, male, child, auto) |
| hospitalId | INTEGER | FOREIGN KEY | ë³‘ì› ID |
| metadata | JSONB | DEFAULT '{}' | ì¶”ê°€ ë©”íƒ€ë°ì´í„° |
| isFavorite | BOOLEAN | DEFAULT false | ì¦ê²¨ì°¾ê¸° ì—¬ë¶€ |
| isPublic | BOOLEAN | DEFAULT false | ê³µê°œ ì—¬ë¶€ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**images í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì´ë¯¸ì§€ ê³ ìœ  ID |
| title | TEXT | NOT NULL | ì´ë¯¸ì§€ ì œëª© |
| style | TEXT | NOT NULL | ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ |
| originalUrl | TEXT | NOT NULL | ì›ë³¸ ì´ë¯¸ì§€ URL (GCS PUBLIC) |
| transformedUrl | TEXT | NOT NULL | ë³€í™˜ëœ ì´ë¯¸ì§€ URL (GCS PUBLIC) |
| thumbnailUrl | TEXT | | ì¸ë„¤ì¼ URL (GCS PUBLIC) |
| metadata | TEXT | DEFAULT '{}' | ë©”íƒ€ë°ì´í„° |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| userId | VARCHAR(128) | | ì‚¬ìš©ì ID (ì´ë©”ì¼ ë˜ëŠ” Firebase UID) |
| categoryId | VARCHAR(50) | | ì¹´í…Œê³ ë¦¬ ID |
| conceptId | VARCHAR(50) | | ì»¨ì…‰ ID |
| styleId | VARCHAR(50) | | ìŠ¤íƒ€ì¼ ID |

**collages í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì½œë¼ì£¼ ID |
| userId | INTEGER | FOREIGN KEY, NOT NULL | ì‚¬ìš©ì ID |
| title | VARCHAR(200) | NOT NULL | ì½œë¼ì£¼ ì œëª© |
| url | TEXT | NOT NULL | ì½œë¼ì£¼ ì´ë¯¸ì§€ URL (GCS) |
| layout | VARCHAR(20) | NOT NULL | ë ˆì´ì•„ì›ƒ (2, 6, 12, 24) |
| resolution | VARCHAR(20) | DEFAULT 'web' | í•´ìƒë„ (web, high, print) |
| format | VARCHAR(10) | DEFAULT 'png' | íŒŒì¼ í˜•ì‹ (png, jpg, webp) |
| imageCount | INTEGER | NOT NULL | ì´ë¯¸ì§€ ê°œìˆ˜ |
| metadata | JSONB | DEFAULT '{}' | ë©”íƒ€ë°ì´í„° |
| gcsPath | VARCHAR(500) | | GCS ì €ì¥ ê²½ë¡œ |
| isFavorite | BOOLEAN | DEFAULT false | ì¦ê²¨ì°¾ê¸° ì—¬ë¶€ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**personas í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | í˜ë¥´ì†Œë‚˜ ID |
| personaId | TEXT | UNIQUE, NOT NULL | í˜ë¥´ì†Œë‚˜ ë¬¸ìì—´ ID (ì˜ˆ: 'maternal-guide') |
| name | TEXT | NOT NULL | í˜ë¥´ì†Œë‚˜ ì´ë¦„ |
| avatarEmoji | TEXT | NOT NULL | ì•„ë°”íƒ€ ì´ëª¨ì§€ |
| description | TEXT | NOT NULL | í˜ë¥´ì†Œë‚˜ ì„¤ëª… |
| systemPrompt | TEXT | NOT NULL | AI ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ |
| categoryId | INTEGER | FOREIGN KEY | ì¹´í…Œê³ ë¦¬ ID |
| tags | JSONB | DEFAULT '[]' | íƒœê·¸ |
| color | VARCHAR(20) | | ìƒ‰ìƒ |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |
| usageCount | INTEGER | DEFAULT 0 | ì‚¬ìš© íšŸìˆ˜ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**persona_categories í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì¹´í…Œê³ ë¦¬ ID |
| categoryId | TEXT | UNIQUE, NOT NULL | ì¹´í…Œê³ ë¦¬ ë¬¸ìì—´ ID |
| name | TEXT | NOT NULL | ì¹´í…Œê³ ë¦¬ ì´ë¦„ |
| description | TEXT | | ì¹´í…Œê³ ë¦¬ ì„¤ëª… |
| icon | TEXT | | ì•„ì´ì½˜ ì´ë¦„ |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**saved_chats í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì±„íŒ… ID |
| userId | INTEGER | FOREIGN KEY, NOT NULL | ì‚¬ìš©ì ID |
| title | VARCHAR(200) | NOT NULL | ì±„íŒ… ì œëª© |
| personaId | VARCHAR(50) | | ì‚¬ìš©ëœ í˜ë¥´ì†Œë‚˜ ID |
| messages | JSONB | NOT NULL | ë©”ì‹œì§€ ë°°ì—´ |
| metadata | JSONB | DEFAULT '{}' | ë©”íƒ€ë°ì´í„° |
| messageCount | INTEGER | DEFAULT 0 | ë©”ì‹œì§€ ê°œìˆ˜ |
| isFavorite | BOOLEAN | DEFAULT false | ì¦ê²¨ì°¾ê¸° ì—¬ë¶€ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

#### 2.3.5 ì»¨ì…‰ ë° ìŠ¤íƒ€ì¼ ê´€ë¦¬ í…Œì´ë¸” (6ê°œ)

**concept_categories í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì¹´í…Œê³ ë¦¬ ID |
| categoryId | TEXT | UNIQUE, NOT NULL | ì¹´í…Œê³ ë¦¬ ë¬¸ìì—´ ID |
| name | TEXT | NOT NULL | ì¹´í…Œê³ ë¦¬ ì´ë¦„ |
| description | TEXT | | ì¹´í…Œê³ ë¦¬ ì„¤ëª… |
| icon | TEXT | | ì•„ì´ì½˜ ì´ë¦„ |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**concepts í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì»¨ì…‰ ID |
| conceptId | TEXT | UNIQUE, NOT NULL | ì»¨ì…‰ ë¬¸ìì—´ ID |
| title | TEXT | NOT NULL | ì»¨ì…‰ ì œëª© |
| description | TEXT | NOT NULL | ì»¨ì…‰ ì„¤ëª… |
| promptTemplate | TEXT | NOT NULL | AI í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ |
| exampleImageUrl | TEXT | | ì˜ˆì‹œ ì´ë¯¸ì§€ URL |
| categoryId | INTEGER | FOREIGN KEY | ì¹´í…Œê³ ë¦¬ ID |
| tags | JSONB | DEFAULT '[]' | íƒœê·¸ |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |
| usageCount | INTEGER | DEFAULT 0 | ì‚¬ìš© íšŸìˆ˜ |
| thumbnailUrl | TEXT | | ì¸ë„¤ì¼ URL |
| color | VARCHAR(20) | | ìƒ‰ìƒ |
| isNew | BOOLEAN | DEFAULT false | ì‹ ê·œ í‘œì‹œ |
| isFeatured | BOOLEAN | DEFAULT false | ì¶”ì²œ í‘œì‹œ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**image_styles í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ìŠ¤íƒ€ì¼ ID |
| styleId | TEXT | UNIQUE | ìŠ¤íƒ€ì¼ ë¬¸ìì—´ ID (ì˜ˆ: 'ghibli', 'disney') |
| name | TEXT | NOT NULL | ìŠ¤íƒ€ì¼ ì´ë¦„ |
| description | TEXT | NOT NULL | ìŠ¤íƒ€ì¼ ì„¤ëª… |
| systemPrompt | TEXT | NOT NULL | ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ |
| characterPrompt | TEXT | | ìºë¦­í„° ìƒì„±ìš© í”„ë¡¬í”„íŠ¸ |
| thumbnailUrl | TEXT | | ì¸ë„¤ì¼ ì´ë¯¸ì§€ URL |
| characterSampleUrl | TEXT | | ìºë¦­í„° ìƒ˜í”Œ ì´ë¯¸ì§€ URL |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| creatorId | INTEGER | FOREIGN KEY | ìƒì„±ì (ê´€ë¦¬ì) ID |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |

**music_styles í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ìŠ¤íƒ€ì¼ ID |
| styleId | TEXT | UNIQUE, NOT NULL | ìŠ¤íƒ€ì¼ ë¬¸ìì—´ ID |
| name | TEXT | NOT NULL | ìŠ¤íƒ€ì¼ ì´ë¦„ |
| description | TEXT | | ìŠ¤íƒ€ì¼ ì„¤ëª… |
| promptTemplate | TEXT | | í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ |
| exampleUrl | TEXT | | ì˜ˆì‹œ ìŒì•… URL |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**style_templates í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | í…œí”Œë¦¿ ID |
| templateId | TEXT | UNIQUE, NOT NULL | í…œí”Œë¦¿ ë¬¸ìì—´ ID |
| name | TEXT | NOT NULL | í…œí”Œë¦¿ ì´ë¦„ |
| category | VARCHAR(50) | NOT NULL | ì¹´í…Œê³ ë¦¬ (image, music) |
| promptTemplate | TEXT | NOT NULL | í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ |
| variables | JSONB | DEFAULT '{}' | ë³€ìˆ˜ ì •ì˜ |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |

**global_prompt_rules í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ê·œì¹™ ID |
| ruleId | TEXT | UNIQUE, NOT NULL | ê·œì¹™ ë¬¸ìì—´ ID |
| category | VARCHAR(50) | NOT NULL | ì¹´í…Œê³ ë¦¬ (image, music, chat) |
| ruleText | TEXT | NOT NULL | ê·œì¹™ í…ìŠ¤íŠ¸ |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| priority | INTEGER | DEFAULT 0 | ìš°ì„ ìˆœìœ„ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |

#### 2.3.6 A/B í…ŒìŠ¤íŒ… í…Œì´ë¸” (3ê°œ)

**ab_tests í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | í…ŒìŠ¤íŠ¸ ID |
| name | VARCHAR(200) | NOT NULL | í…ŒìŠ¤íŠ¸ ì´ë¦„ |
| description | TEXT | | í…ŒìŠ¤íŠ¸ ì„¤ëª… |
| targetType | VARCHAR(50) | NOT NULL | ëŒ€ìƒ íƒ€ì… (persona, concept, style) |
| status | VARCHAR(20) | DEFAULT 'draft' | ìƒíƒœ (draft, active, paused, completed) |
| startDate | TIMESTAMP | | ì‹œì‘ì¼ |
| endDate | TIMESTAMP | | ì¢…ë£Œì¼ |
| winnerVariantId | INTEGER | | ìŠ¹ë¦¬ ë³€í˜• ID |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**ab_test_variants í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ë³€í˜• ID |
| testId | INTEGER | FOREIGN KEY, NOT NULL | í…ŒìŠ¤íŠ¸ ID |
| name | VARCHAR(100) | NOT NULL | ë³€í˜• ì´ë¦„ (A, B, C) |
| config | JSONB | NOT NULL | ë³€í˜• ì„¤ì • |
| trafficPercentage | INTEGER | DEFAULT 50 | íŠ¸ë˜í”½ ë¹„ìœ¨ (%) |
| isControl | BOOLEAN | DEFAULT false | ëŒ€ì¡°êµ° ì—¬ë¶€ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |

**ab_test_results í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ê²°ê³¼ ID |
| testId | INTEGER | FOREIGN KEY, NOT NULL | í…ŒìŠ¤íŠ¸ ID |
| variantId | INTEGER | FOREIGN KEY, NOT NULL | ë³€í˜• ID |
| userId | INTEGER | FOREIGN KEY | ì‚¬ìš©ì ID |
| eventType | VARCHAR(50) | NOT NULL | ì´ë²¤íŠ¸ íƒ€ì… (view, click, conversion) |
| eventData | JSONB | DEFAULT '{}' | ì´ë²¤íŠ¸ ë°ì´í„° |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |

#### 2.3.7 ë§ˆì¼ìŠ¤í†¤ ì‹œìŠ¤í…œ í…Œì´ë¸” (5ê°œ)

**milestone_categories í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì¹´í…Œê³ ë¦¬ ID |
| categoryId | TEXT | UNIQUE, NOT NULL | ì¹´í…Œê³ ë¦¬ ë¬¸ìì—´ ID |
| name | TEXT | NOT NULL | ì¹´í…Œê³ ë¦¬ ì´ë¦„ |
| description | TEXT | | ì¹´í…Œê³ ë¦¬ ì„¤ëª… |
| icon | TEXT | | ì•„ì´ì½˜ ì´ë¦„ |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**milestones í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ë§ˆì¼ìŠ¤í†¤ ID |
| milestoneId | TEXT | UNIQUE, NOT NULL | ë§ˆì¼ìŠ¤í†¤ ë¬¸ìì—´ ID |
| categoryId | INTEGER | FOREIGN KEY | ì¹´í…Œê³ ë¦¬ ID |
| title | TEXT | NOT NULL | ë§ˆì¼ìŠ¤í†¤ ì œëª© |
| description | TEXT | NOT NULL | ë§ˆì¼ìŠ¤í†¤ ì„¤ëª… |
| iconUrl | TEXT | | ì•„ì´ì½˜ URL |
| completionReward | JSONB | DEFAULT '{}' | ì™„ë£Œ ë³´ìƒ |
| pointsRequired | INTEGER | DEFAULT 0 | í•„ìš” í¬ì¸íŠ¸ |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| isSpecial | BOOLEAN | DEFAULT false | íŠ¹ë³„ ë§ˆì¼ìŠ¤í†¤ ì—¬ë¶€ |
| unlockCondition | JSONB | | ì ê¸ˆ í•´ì œ ì¡°ê±´ |
| expiresAt | TIMESTAMP | | ë§Œë£Œ ì‹œê°„ |
| targetAudience | VARCHAR(50) | | ëŒ€ìƒ (all, pregnant, postpartum) |
| difficultyLevel | INTEGER | DEFAULT 1 | ë‚œì´ë„ (1-5) |
| estimatedDuration | INTEGER | | ì˜ˆìƒ ì†Œìš” ì‹œê°„(ë¶„) |
| tags | JSONB | DEFAULT '[]' | íƒœê·¸ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**user_milestones í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ê¸°ë¡ ID |
| userId | INTEGER | FOREIGN KEY, NOT NULL | ì‚¬ìš©ì ID |
| milestoneId | INTEGER | FOREIGN KEY, NOT NULL | ë§ˆì¼ìŠ¤í†¤ ID |
| status | VARCHAR(20) | DEFAULT 'in_progress' | ìƒíƒœ (in_progress, completed, expired) |
| completedAt | TIMESTAMP | | ì™„ë£Œ ì‹œê°„ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |

**milestone_applications í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì‹ ì²­ ID |
| userId | INTEGER | FOREIGN KEY, NOT NULL | ì‚¬ìš©ì ID |
| milestoneId | INTEGER | FOREIGN KEY, NOT NULL | ë§ˆì¼ìŠ¤í†¤ ID |
| status | VARCHAR(20) | DEFAULT 'pending' | ì‹ ì²­ ìƒíƒœ (pending, approved, rejected) |
| applicationData | JSONB | DEFAULT '{}' | ì‹ ì²­ ë°ì´í„° |
| reviewNotes | TEXT | | ê²€í†  ë…¸íŠ¸ |
| reviewedBy | INTEGER | FOREIGN KEY | ê²€í† ì ID |
| reviewedAt | TIMESTAMP | | ê²€í†  ì‹œê°„ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ì‹ ì²­ ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**milestone_application_files í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | íŒŒì¼ ID |
| applicationId | INTEGER | FOREIGN KEY, NOT NULL | ì‹ ì²­ ID |
| fileUrl | TEXT | NOT NULL | íŒŒì¼ URL (GCS) |
| fileName | VARCHAR(255) | NOT NULL | íŒŒì¼ ì´ë¦„ |
| fileType | VARCHAR(50) | | íŒŒì¼ íƒ€ì… (image, document) |
| fileSize | INTEGER | | íŒŒì¼ í¬ê¸°(bytes) |
| gcsPath | VARCHAR(500) | | GCS ì €ì¥ ê²½ë¡œ |
| uploadedAt | TIMESTAMP | DEFAULT NOW() | ì—…ë¡œë“œ ì‹œê°„ |

#### 2.3.8 ë°°ë„ˆ ë° ì½˜í…ì¸  í…Œì´ë¸” (2ê°œ)

**banners í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ë°°ë„ˆ ID |
| title | TEXT | NOT NULL | ë°°ë„ˆ ì œëª© |
| description | TEXT | | ë°°ë„ˆ ì„¤ëª… |
| imageSrc | TEXT | NOT NULL | ë°°ë„ˆ ì´ë¯¸ì§€ URL (PUBLIC GCS) |
| href | TEXT | | í´ë¦­ ì‹œ ì´ë™í•  URL |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |
| startDate | TIMESTAMP | | ì‹œì‘ì¼ |
| endDate | TIMESTAMP | | ì¢…ë£Œì¼ |
| targetAudience | VARCHAR(50) | | ëŒ€ìƒ (all, pregnant, free, premium) |
| clickCount | INTEGER | DEFAULT 0 | í´ë¦­ ìˆ˜ |
| viewCount | INTEGER | DEFAULT 0 | ë…¸ì¶œ ìˆ˜ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**small_banners í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ë°°ë„ˆ ID |
| title | TEXT | NOT NULL | ë°°ë„ˆ ì œëª© |
| description | TEXT | | ë°°ë„ˆ ì„¤ëª… |
| imageUrl | TEXT | NOT NULL | ë°°ë„ˆ ì´ë¯¸ì§€ URL (PUBLIC GCS) |
| linkUrl | TEXT | | í´ë¦­ ì‹œ ì´ë™í•  URL |
| isActive | BOOLEAN | DEFAULT true | í™œì„±í™” ìƒíƒœ |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

#### 2.3.9 ì„œë¹„ìŠ¤ ì¹´íƒˆë¡œê·¸ í…Œì´ë¸” (2ê°œ)

**service_categories í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì¹´í…Œê³ ë¦¬ ID |
| title | TEXT | NOT NULL | ì¹´í…Œê³ ë¦¬ ì œëª© |
| icon | TEXT | | ì•„ì´ì½˜ ì´ë¦„ |
| description | TEXT | | ì¹´í…Œê³ ë¦¬ ì„¤ëª… |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |
| isPublic | BOOLEAN | DEFAULT true | ê³µê°œ ì—¬ë¶€ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

**service_items í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | í•­ëª© ID |
| categoryId | INTEGER | FOREIGN KEY, NOT NULL | ì¹´í…Œê³ ë¦¬ ID |
| itemId | TEXT | NOT NULL | í•­ëª© ë¬¸ìì—´ ID |
| title | TEXT | NOT NULL | í•­ëª© ì œëª© |
| path | TEXT | | í•­ëª© ê²½ë¡œ (ë¼ìš°íŠ¸) |
| icon | TEXT | | ì•„ì´ì½˜ ì´ë¦„ |
| description | TEXT | | í•­ëª© ì„¤ëª… |
| order | INTEGER | DEFAULT 0 | ì •ë ¬ ìˆœì„œ |
| isPublic | BOOLEAN | DEFAULT true | ê³µê°œ ì—¬ë¶€ |
| requiresPremium | BOOLEAN | DEFAULT false | í”„ë¦¬ë¯¸ì—„ í•„ìš” ì—¬ë¶€ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

#### 2.3.10 ì•Œë¦¼ ì‹œìŠ¤í…œ í…Œì´ë¸” (2ê°œ)

**notifications í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì•Œë¦¼ ID |
| userId | INTEGER | FOREIGN KEY, NOT NULL | ì‚¬ìš©ì ID |
| type | VARCHAR(50) | NOT NULL | ì•Œë¦¼ íƒ€ì… (milestone, music_ready, system) |
| title | VARCHAR(200) | NOT NULL | ì•Œë¦¼ ì œëª© |
| message | TEXT | NOT NULL | ì•Œë¦¼ ë‚´ìš© |
| data | JSONB | DEFAULT '{}' | ì¶”ê°€ ë°ì´í„° |
| isRead | BOOLEAN | DEFAULT false | ì½ìŒ ì—¬ë¶€ |
| readAt | TIMESTAMP | | ì½ì€ ì‹œê°„ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |

**notification_settings í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì„¤ì • ID |
| userId | INTEGER | FOREIGN KEY, NOT NULL | ì‚¬ìš©ì ID |
| notificationType | VARCHAR(50) | NOT NULL | ì•Œë¦¼ íƒ€ì… |
| enabled | BOOLEAN | DEFAULT true | í™œì„±í™” ì—¬ë¶€ |
| emailEnabled | BOOLEAN | DEFAULT true | ì´ë©”ì¼ ì•Œë¦¼ í™œì„±í™” |
| pushEnabled | BOOLEAN | DEFAULT true | í‘¸ì‹œ ì•Œë¦¼ í™œì„±í™” |
| smsEnabled | BOOLEAN | DEFAULT false | SMS ì•Œë¦¼ í™œì„±í™” |
| frequency | VARCHAR(20) | DEFAULT 'immediate' | ì•Œë¦¼ ë¹ˆë„ (immediate, daily, weekly) |
| quietHoursStart | TIME | | ì¡°ìš©í•œ ì‹œê°„ ì‹œì‘ |
| quietHoursEnd | TIME | | ì¡°ìš©í•œ ì‹œê°„ ì¢…ë£Œ |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

#### 2.3.11 ì‹œìŠ¤í…œ ì„¤ì • í…Œì´ë¸” (1ê°œ)

**system_settings í…Œì´ë¸”**

| Column | Data Type | Constraints | ì„¤ëª… |
|--------|-----------|------------|------|
| id | SERIAL | PRIMARY KEY | ì„¤ì • ID |
| settingKey | VARCHAR(100) | UNIQUE, NOT NULL | ì„¤ì • í‚¤ |
| settingValue | TEXT | | ì„¤ì • ê°’ |
| valueType | VARCHAR(20) | DEFAULT 'string' | ê°’ íƒ€ì… (string, number, boolean, json) |
| description | TEXT | | ì„¤ì • ì„¤ëª… |
| isPublic | BOOLEAN | DEFAULT false | ê³µê°œ ì—¬ë¶€ |
| category | VARCHAR(50) | | ì¹´í…Œê³ ë¦¬ (general, ai, storage, etc) |
| updatedBy | INTEGER | FOREIGN KEY | ìˆ˜ì •ì ID |
| createdAt | TIMESTAMP | DEFAULT NOW() | ìƒì„± ì‹œê°„ |
| updatedAt | TIMESTAMP | DEFAULT NOW() | ìˆ˜ì • ì‹œê°„ |

---

### 2.4 ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë¡œì§

#### 2.4.1 JWT í˜ì´ë¡œë“œ êµ¬ì¡°

```typescript
interface JWTPayload {
  id: number;           // ì‚¬ìš©ì ID
  userId: number;       // í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•œ ì¤‘ë³µ í•„ë“œ
  email: string | null;
  memberType: string | null;  // free, pro, membership, hospital_admin, admin, superadmin
  hospitalId?: number | null;
  username?: string;
  iat?: number;         // í† í° ë°œê¸‰ ì‹œê°„
  exp?: number;         // í† í° ë§Œë£Œ ì‹œê°„
}
```

#### 2.4.2 ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ ì²˜ë¦¬ ìˆœì„œ

1. **í† í° ì¶”ì¶œ**: 
   - ì¿ í‚¤ì—ì„œ `auth_token` í™•ì¸
   - ì—†ìœ¼ë©´ Authorization í—¤ë”ì—ì„œ `Bearer` í† í° í™•ì¸

2. **í† í° ê²€ì¦**: 
   - `jwt.verify(token, JWT_SECRET)` ì‹¤í–‰
   - ë§Œë£Œ ì—¬ë¶€ í™•ì¸
   - ì„œëª… ìœ íš¨ì„± í™•ì¸

3. **ì‚¬ìš©ì ì •ë³´ ì£¼ì…**:
   - ê²€ì¦ ì„±ê³µ ì‹œ `req.user`ì— ë””ì½”ë”©ëœ ì‚¬ìš©ì ì •ë³´ í• ë‹¹
   - ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ì „ë‹¬

4. **ê¶Œí•œ ê²€ì¦**:
   - `requireAuth`: ì¸ì¦ëœ ì‚¬ìš©ì í™•ì¸
   - `requireAdminOrSuperAdmin`: memberTypeì´ 'admin' ë˜ëŠ” 'superadmin' í™•ì¸
   - `requireHospitalAdmin`: memberTypeì´ 'hospital_admin' ë° hospitalId ì¡´ì¬ í™•ì¸
   - `requireActiveHospital`: ë³‘ì› í™œì„±í™” ìƒíƒœ ì¶”ê°€ í™•ì¸
   - `requirePremiumAccess`: í”„ë¦¬ë¯¸ì—„ ê¸°ëŠ¥ ì ‘ê·¼ ê¶Œí•œ í™•ì¸

#### 2.4.3 ê¶Œí•œ ê³„ì¸µ êµ¬ì¡°

```
Superadmin (ìµœê³  ê´€ë¦¬ì)
  â†“
Admin (ê´€ë¦¬ì)
  â†“
Hospital Admin (ë³‘ì› ê´€ë¦¬ì)
  â†“
Membership (ë©¤ë²„ì‹­ íšŒì›)
  â†“
Pro (í”„ë¡œ íšŒì›)
  â†“
Free (ë¬´ë£Œ íšŒì›)
```

---

## 3. í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

### 3.1 React ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
client/src/components/
â”œâ”€â”€ ui/                    # shadcn/ui ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ button.tsx
â”‚   â”œâ”€â”€ input.tsx
â”‚   â”œâ”€â”€ form.tsx
â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”œâ”€â”€ table.tsx
â”‚   â”œâ”€â”€ select.tsx
â”‚   â”œâ”€â”€ toast.tsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ admin/                 # ê´€ë¦¬ì ì „ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ConceptManagement.tsx      # ì»¨ì…‰ ê´€ë¦¬
â”‚   â”œâ”€â”€ HospitalCodeManagement.tsx # ë³‘ì› ì½”ë“œ ê´€ë¦¬
â”‚   â”œâ”€â”€ BannerManagement.tsx       # ë°°ë„ˆ ê´€ë¦¬
â”‚   â”œâ”€â”€ MemberManagement.tsx       # íšŒì› ê´€ë¦¬
â”‚   â”œâ”€â”€ SystemSettings.tsx         # ì‹œìŠ¤í…œ ì„¤ì •
â”‚   â””â”€â”€ ABTestManagement.tsx       # A/B í…ŒìŠ¤íŠ¸ ê´€ë¦¬
â”œâ”€â”€ CollageBuilder/        # ì½œë¼ì£¼ ë¹Œë”
â”‚   â”œâ”€â”€ LayoutPicker.tsx
â”‚   â”œâ”€â”€ ImageSelector.tsx
â”‚   â””â”€â”€ CollagePreview.tsx
â”œâ”€â”€ gallery/               # ê°¤ëŸ¬ë¦¬ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ImageGrid.tsx
â”‚   â”œâ”€â”€ FilterBar.tsx
â”‚   â””â”€â”€ ImageModal.tsx
â”œâ”€â”€ MusicGenerator/        # ìŒì•… ìƒì„± UI
â”‚   â”œâ”€â”€ MusicForm.tsx
â”‚   â”œâ”€â”€ MusicPlayer.tsx
â”‚   â””â”€â”€ MusicGallery.tsx
â””â”€â”€ chat/                  # ì±„íŒ… ì»´í¬ë„ŒíŠ¸
    â”œâ”€â”€ ChatInterface.tsx
    â”œâ”€â”€ PersonaSelector.tsx
    â””â”€â”€ MessageList.tsx
```

### 3.2 ë¼ìš°íŒ… êµ¬ì¡° (Wouter)

```typescript
// client/src/App.tsx ì£¼ìš” ë¼ìš°íŠ¸
<Route path="/" component={Home} />
<Route path="/auth" component={Auth} />
<Route path="/register" component={Register} />
<Route path="/signup" component={SignupFlow} />
<Route path="/admin" component={AdminDashboard} />
<Route path="/hospital/dashboard" component={HospitalDashboard} />
<Route path="/gallery" component={Gallery} />
<Route path="/chat" component={Chat} />
<Route path="/lullaby" component={Lullaby} />
<Route path="/milestones" component={Milestones} />
<Route path="/maternity-photo" component={MaternityPhoto} />
<Route path="/family-photo" component={FamilyPhoto} />
<Route path="/stickers" component={Stickers} />
<Route path="/collage" component={CollageBuilder} />
<Route path="/profile" component={Profile} />
<Route path="/settings" component={AccountSettings} />
```

### 3.3 ìƒíƒœ ê´€ë¦¬ (TanStack Query)

```typescript
// ì£¼ìš” Query Key êµ¬ì¡°
const QueryKeys = {
  // ì‚¬ìš©ì
  currentUser: ['user', 'me'],
  userSettings: ['user', 'settings'],
  
  // ìŒì•…
  musicList: (filter: string) => ['music', 'list', filter],
  musicStatus: (id: number) => ['music', 'status', id],
  musicStyles: ['music', 'styles'],
  
  // ì´ë¯¸ì§€
  gallery: (filter: string, page: number) => ['gallery', filter, page],
  
  // ë§ˆì¼ìŠ¤í†¤
  milestones: ['milestones'],
  userProgress: ['milestones', 'progress'],
  
  // ì±„íŒ…
  savedChats: ['chats', 'saved'],
  
  // ê´€ë¦¬ì
  adminUsers: (filters: any) => ['admin', 'users', filters],
  adminHospitals: ['admin', 'hospitals'],
  adminConcepts: ['admin', 'concepts'],
}
```

---

## 4. ì£¼ìš” ë³€ê²½ì‚¬í•­

### 4.1 ì´ì „ ë²„ì „ ëŒ€ë¹„ ì£¼ìš” ì¶”ê°€ ê¸°ëŠ¥

#### âœ… ìƒˆë¡œ ì¶”ê°€ëœ ê¸°ëŠ¥ (11ê°œ)

1. **AI ì±„íŒ… ì‹œìŠ¤í…œ** (`chat-routes.ts`, `personas`, `saved_chats`)
   - í˜ë¥´ì†Œë‚˜ ê¸°ë°˜ ëŒ€í™”í˜• AI
   - ì±„íŒ… ì´ë ¥ ì €ì¥ ë° ë‚´ë³´ë‚´ê¸° (HTML/í…ìŠ¤íŠ¸)
   - í˜ë¥´ì†Œë‚˜ ì¶”ì²œ ì‹œìŠ¤í…œ

2. **ì»¨ì…‰ ê´€ë¦¬ ì‹œìŠ¤í…œ** (`concepts.ts`, `concepts`, `concept_categories`)
   - ë™ì  ì»¨ì…‰ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬
   - ì»¨ì…‰ë³„ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
   - ì»¨ì…‰ ìˆœì„œ ë³€ê²½ API

3. **ì‚¬ìš©ì ì„¤ì • ì‹œìŠ¤í…œ** (`user-settings.ts`, `user_settings`, `user_notification_settings`)
   - í…Œë§ˆ, ì–¸ì–´, íƒ€ì„ì¡´ ì„¤ì •
   - ì•Œë¦¼ ì„¤ì • (ì´ë©”ì¼, í‘¸ì‹œ, ì„ì‹  ë¦¬ë§ˆì¸ë”)
   - ìë™ ì €ì¥, íŠœí† ë¦¬ì–¼ í‘œì‹œ ì„¤ì •

4. **A/B í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ** (`ab_tests`, `ab_test_variants`, `ab_test_results`)
   - ì‹¤í—˜ ê´€ë¦¬ ë° ë³€í˜• ì„¤ì •
   - íŠ¸ë˜í”½ ë¶„í•  ë° ê²°ê³¼ ì¶”ì 
   - ìŠ¹ë¦¬ ë³€í˜• ìë™ ì„ íƒ

5. **ìŠ¤íƒ€ì¼ ê´€ë¦¬ ì‹œìŠ¤í…œ** (`image_styles`, `music_styles`, `style_templates`)
   - ì´ë¯¸ì§€/ìŒì•… ìŠ¤íƒ€ì¼ ì¤‘ì•™ ê´€ë¦¬
   - í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿í™”
   - ê¸€ë¡œë²Œ í”„ë¡¬í”„íŠ¸ ê·œì¹™

6. **ì„œë¹„ìŠ¤ ì¹´íƒˆë¡œê·¸** (`service-catalog.ts`, `service_categories`, `service_items`)
   - ë™ì  ë©”ë‰´ êµ¬ì¡°
   - ê³µê°œ/ë¹„ê³µê°œ ì„œë¹„ìŠ¤ ê´€ë¦¬
   - í”„ë¦¬ë¯¸ì—„ ê¸°ëŠ¥ í”Œë˜ê·¸

7. **ë°°ë„ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œìŠ¤í…œ** (`banner-migration.ts`)
   - PRIVATE GCS â†’ PUBLIC GCS ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜
   - ë°°ë„ˆ ìƒíƒœ ê²€ì‚¬ API
   - ë§ˆì´ê·¸ë ˆì´ì…˜ ê²°ê³¼ ì¶”ì 

8. **ì„ì‹  í”„ë¡œí•„ ê´€ë¦¬** (`profile.ts`, `pregnancy_profiles`)
   - ì¶œì‚° ì˜ˆì •ì¼, ì•„ê¸° ì •ë³´ ê´€ë¦¬
   - ì„ì‹  ì£¼ì°¨ ìë™ ê³„ì‚°
   - ë‹¤íƒœì•„ ì§€ì›

9. **ì•Œë¦¼ ì‹œìŠ¤í…œ** (`notifications`, `notification_settings`)
   - ë‹¤ì¤‘ ì±„ë„ ì•Œë¦¼ (ì´ë©”ì¼, í‘¸ì‹œ, SMS)
   - ì¡°ìš©í•œ ì‹œê°„ ì„¤ì •
   - ì•Œë¦¼ ë¹ˆë„ ì¡°ì ˆ

10. **ì½œë¼ì£¼ ê³ ê¸‰ ê¸°ëŠ¥** (`collages`)
    - ë‹¤ì–‘í•œ ë ˆì´ì•„ì›ƒ (2, 6, 12, 24ë¶„í• )
    - í•´ìƒë„ ì„ íƒ (web, high, print)
    - íŒŒì¼ í˜•ì‹ ì„ íƒ (PNG, JPG, WebP)

11. **í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ ì‹œìŠ¤í…œ** (`placeholder.ts`)
    - ë™ì  SVG í”Œë ˆì´ìŠ¤í™€ë” ìƒì„±
    - ìŠ¤íƒ€ì¼ë³„ ìƒ‰ìƒ ì ìš©
    - ì—ëŸ¬ ìƒíƒœ í‘œì‹œ

#### ğŸ”§ ê°œì„ ëœ ê¸°ëŠ¥

1. **ë³‘ì› ì½”ë“œ ìƒì„±**
   - ìë™ ì½”ë“œ ìƒì„± (8ì ì˜ìˆ«ì)
   - ì¤‘ë³µ ê²€ì‚¬ ê°•í™”
   - expiresAt í•„ë“œ ë‚ ì§œ ë³€í™˜ ë²„ê·¸ ìˆ˜ì • âœ… (2025-10-24)

2. **QR ì½”ë“œ ì‹œìŠ¤í…œ**
   - QR ì´ë¯¸ì§€ ìƒì„± API
   - QR ë°ì´í„° ì¡°íšŒ API (ê´€ë¦¬ì/ê³µê°œ)
   - QR ìŠ¤ìº” ê²€ì¦ ê°•í™”

3. **ê°¤ëŸ¬ë¦¬ ê¸°ëŠ¥**
   - ì¦ê²¨ì°¾ê¸° í† ê¸€
   - ë¯¸ë””ì–´ ê³µìœ 
   - í•„í„°ë§ ê°œì„ 

4. **ë§ˆì¼ìŠ¤í†¤ ì‹œìŠ¤í…œ**
   - íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥
   - ì§„í–‰ ìƒí™© ì¶”ì 
   - ì‹ ì²­ ê´€ë¦¬ ê°•í™”

### 4.2 ë¼ìš°í„° ëª¨ë“ˆ í™•ì¥

| í•­ëª© | ì´ì „ ë²„ì „ | í˜„ì¬ ë²„ì „ |
|------|----------|----------|
| ë¼ìš°í„° íŒŒì¼ ìˆ˜ | ~16ê°œ | **21ê°œ** |
| ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìˆ˜ | ~15ê°œ | **38ê°œ** |
| API ì—”ë“œí¬ì¸íŠ¸ ìˆ˜ | ~60ê°œ | **120ê°œ+** |

### 4.3 ìµœê·¼ ë²„ê·¸ ìˆ˜ì • ì´ë ¥

#### 2025-10-24: hospital_codes.expiresAt í•„ë“œ ê²€ì¦ ì˜¤ë¥˜ ìˆ˜ì •

**ë¬¸ì œ**:
- í´ë¼ì´ì–¸íŠ¸ê°€ ë‚ ì§œ ë¬¸ìì—´ `"2025-12-31"` ì „ì†¡
- ì„œë²„ Zod ìŠ¤í‚¤ë§ˆê°€ Date ê°ì²´ ê¸°ëŒ€
- ê²€ì¦ ì‹¤íŒ¨ â†’ `Expected date, received string` ì—ëŸ¬

**ê·¼ë³¸ ì›ì¸**:
- `createInsertSchema().extend()` ë©”ì„œë“œê°€ `expiresAt` í•„ë“œë¥¼ ì œëŒ€ë¡œ ì˜¤ë²„ë¼ì´ë“œí•˜ì§€ ëª»í•¨

**í•´ê²°ì±…**:
```typescript
// server/routes/admin-routes.ts
// ë‚ ì§œ ë¬¸ìì—´ì„ Date ê°ì²´ë¡œ ë³€í™˜ (Zod ê²€ì¦ ì „ ì „ì²˜ë¦¬)
const processedBody = {
  ...req.body,
  expiresAt: req.body.expiresAt ? new Date(req.body.expiresAt) : null
};
const validatedData = insertHospitalCodeSchema.parse(processedBody);
```

**ì˜í–¥**:
- ë³‘ì› ì½”ë“œ ìƒì„± API ì•ˆì •í™”
- ë‚ ì§œ ë³€í™˜ ë¡œê·¸ ì¶”ê°€ë¡œ ë””ë²„ê¹… ìš©ì´ì„± í–¥ìƒ

---

## 5. ë³´ì•ˆ ë° ì„±ëŠ¥

### 5.1 ë³´ì•ˆ ì¡°ì¹˜

1. **íŒŒì¼ ì—…ë¡œë“œ ë³´ì•ˆ**:
   - íŒŒì¼ëª… sanitization (ê²½ë¡œ íƒìƒ‰ ê³µê²© ë°©ì§€)
   - MIME íƒ€ì… ê²€ì¦
   - íŒŒì¼ í¬ê¸° ì œí•œ
   - PUBLIC GCS ì €ì¥ì†Œ ì‚¬ìš© (HIPAA ì˜ë£Œ ë³´ì•ˆ ì œí•œ ì—†ìŒ)

2. **ì¸ì¦ ë³´ì•ˆ**:
   - JWT HTTP-only ì¿ í‚¤
   - bcrypt ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
   - Firebase ì´ì¤‘ ì¸ì¦

3. **API ë³´ì•ˆ**:
   - Rate limiting
   - CORS ì„¤ì •
   - Helmet ë³´ì•ˆ í—¤ë”
   - SQL Injection ë°©ì§€ (Drizzle ORM)

4. **ê¶Œí•œ ê´€ë¦¬**:
   - 6ë‹¨ê³„ ê¶Œí•œ ê³„ì¸µ
   - ë³‘ì›ë³„ ë°ì´í„° ê²©ë¦¬
   - ê´€ë¦¬ì/ë³‘ì› ê´€ë¦¬ì ì „ìš© ì—”ë“œí¬ì¸íŠ¸

### 5.2 ì„±ëŠ¥ ìµœì í™”

1. **ë°ì´í„°ë² ì´ìŠ¤**:
   - ì¸ë±ìŠ¤ ìµœì í™”
   - ê´€ê³„í˜• ì¿¼ë¦¬ ìµœì í™” (Drizzle ORM)
   - í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„

2. **íŒŒì¼ ì €ì¥**:
   - GCS PUBLIC ì €ì¥ì†Œ (CDN ìºì‹±)
   - WebP ì´ë¯¸ì§€ í¬ë§· ì‚¬ìš©
   - ì¸ë„¤ì¼ ìë™ ìƒì„±

3. **í”„ë¡ íŠ¸ì—”ë“œ**:
   - TanStack Query ìºì‹±
   - ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
   - ì´ë¯¸ì§€ Lazy Loading

---

## 6. ê²°ë¡  ë° í–¥í›„ ê³„íš

### 6.1 í˜„ì¬ ì‹œìŠ¤í…œ ìƒíƒœ

- âœ… 21ê°œ ë¼ìš°í„° ëª¨ë“ˆë¡œ ì™„ì „íˆ ëª¨ë“ˆí™”
- âœ… 38ê°œ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ë¡œ í™•ì¥
- âœ… 120ê°œ ì´ìƒì˜ API ì—”ë“œí¬ì¸íŠ¸
- âœ… AI ì±„íŒ…, A/B í…ŒìŠ¤íŒ…, ìŠ¤íƒ€ì¼ ê´€ë¦¬ ë“± ê³ ê¸‰ ê¸°ëŠ¥ êµ¬í˜„
- âœ… ë³‘ì› ì½”ë“œ ìƒì„± ë²„ê·¸ ìˆ˜ì • ì™„ë£Œ (2025-10-24)

### 6.2 í–¥í›„ ê°œì„  ì‚¬í•­ (Architect ì œì•ˆ)

1. **í…ŒìŠ¤íŠ¸ ì¶”ê°€**:
   - ë³‘ì› ì½”ë“œ ìƒì„± í†µí•© í…ŒìŠ¤íŠ¸ (ë¹ˆ ì½”ë“œ, ì¤‘ë³µ, qrDescription)
   - A/B í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ E2E í…ŒìŠ¤íŠ¸

2. **ëª¨ë‹ˆí„°ë§ ê°•í™”**:
   - ë¡œê·¸ì—ì„œ ë¯¼ê° ë°ì´í„° ë…¸ì¶œ ëª¨ë‹ˆí„°ë§
   - ì½”ë“œ ì¶©ëŒ ì¬ì‹œë„ ë¡œì§ ì¶”ê°€

3. **ì„±ëŠ¥ ê°œì„ **:
   - ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìµœì í™”
   - GCS ì—…ë¡œë“œ ë³‘ë ¬ ì²˜ë¦¬
   - ìºì‹± ì „ëµ ê³ ë„í™”

---

## ğŸ“š ë¶€ë¡

### A. í™˜ê²½ ë³€ìˆ˜

```bash
# ë°ì´í„°ë² ì´ìŠ¤
DATABASE_URL=postgresql://...

# JWT
JWT_SECRET=...
JWT_EXPIRES_IN=6h

# Firebase
FIREBASE_PROJECT_ID=...
FIREBASE_PRIVATE_KEY=...
FIREBASE_CLIENT_EMAIL=...

# Google Cloud Storage
GCS_BUCKET_NAME=createtree-upload
GCS_SERVICE_ACCOUNT_KEY=...

# AI ì„œë¹„ìŠ¤
OPENAI_API_KEY=...
GOOGLE_GEMINI_API_KEY=...
TOPMEDIA_API_KEY=...

# Google OAuth
GOOGLE_CLIENT_ID=...
GOOGLE_CLIENT_SECRET=...

# ì´ë©”ì¼
SMTP_HOST=...
SMTP_PORT=587
SMTP_USER=...
SMTP_PASS=...
```

### B. ì£¼ìš” ëª…ë ¹ì–´

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build

# ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë™ê¸°í™”
npm run db:push

# ë°ì´í„°ë² ì´ìŠ¤ ì‹œë“œ ë°ì´í„° ìƒì„±
npm run db:seed

# íƒ€ì… ì²´í¬
npm run type-check

# ë¦°íŠ¸
npm run lint
```

---

**ë¬¸ì„œ ë**
