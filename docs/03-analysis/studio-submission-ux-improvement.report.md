# 제작소 제출 UX 개선 기술 검토 보고서

## 1. 개요
사용자가 제작소(에디터)에서 작업물을 제작하고 저장한 후, 다시 세부미션 모달로 돌아오는 과정에서 발생하는 **UX 단절 및 데이터 유실 문제**를 해결하기 위한 기술적 검토 내용입니다.

## 2. 현황 분석
*   **현재 흐름:** 세부미션 모달 > [제작하기] > 에디터 이동 > 제작 및 저장 > (사용자가 직접) 뒤로가기 > 세부미션 모달 닫힘 & 데이터 초기화.
*   **문제점:**
    1.  뒤로가기 시 모달이 닫히고, 이전에 입력했던 다른 항목(파일, 텍스트 등)의 내용이 유실됨.
    2.  사용자가 "저장 후 미션으로 돌아가기"를 명시적으로 수행할 방법이 없음.

## 3. 해결 방안 (제안된 "저장 후 자동 복귀")

### 3.1 프로세스 흐름
1.  **에디터 진입:** 사용자가 세부미션 모달에서 [제작하기] 클릭.
2.  **작업 및 저장:** 에디터에서 [저장] 버튼 클릭.
3.  **자동 복귀:** 저장이 완료되면 시스템이 자동으로 **미션 상세 페이지로 이동**. 이 때, URL에 "자동 선택할 프로젝트 ID"와 "열어야 할 미션 ID"를 파라미터로 전달.
    *   예: `/missions/1?openSubMission=12&autoSelectProject=105`
4.  **모달 복원:** 미션 상세 페이지가 로드되면서 파라미터를 감지, 자동으로 세부미션 모달을 열고 해당 프로젝트를 **[선택 완료]** 상태로 렌더링.

### 3.2 UI 개선 (기반영)
*   세부미션 모달 내 제작소 탭을 **[제작하기]**와 **[제작물 선택하기]** 두 개의 버튼으로 분리하여 직관성 확보 완료.

## 4. 기술적 상세 및 구현 필요 사항

### 4.1 에디터 (`client/src/pages/party.tsx`)
*   **수정 사항:** `saveProject` 성공 콜백(`onSaveSuccess`) 로직 개선.
*   **상세 로직:**
    *   현재 페이지가 미션 수행 중(`subMissionId` 존재)인지 확인.
    *   미션 수행 중이라면, 저장 완료 토스트 출력 후 `navigate()`를 사용하여 미션 상세 페이지로 이동.
    *   이동 시 쿼리 파라미터(`openSubMission`, `autoSelectProject`) 포함.

### 4.2 미션 상세 페이지 (`client/src/pages/mission-detail.tsx`)
*   **수정 사항:** 페이지 진입/업데이트 시 URL 쿼리 파라미터 감지 로직 추가.
*   **상세 로직:**
    *   `openSubMission`: 해당 ID의 모달을 즉시 오픈.
    *   `autoSelectProject`: 해당 ID의 제작소 프로젝트 데이터를 로드하여 `slotsData`에 주입(선택 상태로 설정).
    *   임시 저장소(Local Storage) 기능을 도입하여, 에디터 이동 전 입력했던 텍스트/파일 데이터 복구 고려 (선택 사항).

### 4.3 데이터 유실 방지 (추가 제안)
*   **이슈:** 에디터로 페이지 이동 시, 모달에 입력해둔 텍스트나 업로드한 파일 정보는 React State이므로 사라짐.
*   **해결책:**
    *   **방안 A (권장):** 에디터로 이동하기 전, 현재 입력 상태를 `sessionStorage`에 백업하고, 돌아왔을 때 복구.
    *   **방안 B:** [제작하기] 버튼 클릭 시 "입력한 내용이 저장되지 않습니다. 먼저 제작을 완료해주세요" 경고 표시.

## 5. 결론 및 의견
*   제안하신 **"저장 버튼 클릭 시 모달로 자동 이동 및 선택"** 프로세스는 기술적으로 구현 가능하며, 사용자 경험을 크게 향상시킬 수 있는 올바른 방향입니다.
*   이미 구현한 **[제작하기] / [선택하기]** 버튼 분리와 결합하면 "템플릿 기반 제작"이라는 관리자의 의도를 사용자에게 명확히 전달할 수 있습니다.
*   **추천 진행:** 위 기술적 상세 내용을 바탕으로 즉시 구현을 진행하는 것을 권장합니다.

---
**보고자:** CreateAI 개발 어시스턴트
**날짜:** 2026-02-01
