---
description: 갭 분석(Gap Analysis) 실행 — PDCA Check 단계. 설계 문서와 실제 구현을 비교하여 매치율 산출
---

# /check [feature-name] 워크플로우

## 실행 절차

1. 사용자가 `/check {feature-name}`을 입력하면 기능명을 확인합니다.

2. 필수 문서 존재 확인:
   - `docs/02-design/features/` 폴더에서 기능명이 일치하는 `.design.md` 파일 — 없으면 Design 먼저 안내
   - 구현 코드가 존재하는지 확인 (Design 문서에 명시된 파일들)

3. **갭 분석 실행** — Design 문서 vs 실제 코드를 비교합니다.

## 비교 항목

### 1. API 비교
```
Design 문서의 API 엔드포인트 목록
  vs
server/routes/ 의 실제 라우트 정의

비교: 엔드포인트 존재 여부, HTTP 메서드, 요청/응답 스키마
```

### 2. DB 스키마 비교
```
Design 문서의 스키마 변경 사항
  vs
db/ 또는 shared/ 의 실제 Drizzle 스키마

비교: 테이블/컬럼 존재 여부, 타입 일치, 관계 설정
```

### 3. 컴포넌트 비교
```
Design 문서의 컴포넌트 목록
  vs
client/src/ 의 실제 컴포넌트 파일

비교: 컴포넌트 존재 여부, Props 인터페이스, 상태 관리
```

### 4. 에러 처리 비교
```
Design 문서의 에러 처리 명세
  vs
실제 에러 핸들링 코드

비교: 에러 코드, 사용자 메시지, try-catch 처리
```

## 매치율 계산

| 매치율 | 평가 | 권장 조치 |
|--------|------|----------|
| 90%+ | ✅ 우수 | `/report`로 완료 보고서 생성 |
| 70~89% | ⚠️ 보통 | 차이점 수정 후 재확인 권장 |
| 70% 미만 | ❌ 미흡 | 주요 갭 해결 필수 |

## 분석 결과 템플릿

```markdown
# {Feature Name} 갭 분석 결과

## 개요
- **분석 대상**: {feature-name}
- **분석일**: {YYYY-MM-DD}
- **Design 문서**: docs/02-design/features/{feature-name}.design.md

## 종합 결과

| 카테고리 | 매치율 | 상태 |
|----------|:------:|:----:|
| API 엔드포인트 | {N}% | ✅/⚠️/❌ |
| DB 스키마 | {N}% | ✅/⚠️/❌ |
| 컴포넌트 구조 | {N}% | ✅/⚠️/❌ |
| 에러 처리 | {N}% | ✅/⚠️/❌ |
| **종합** | **{N}%** | ✅/⚠️/❌ |

## 발견된 차이점

### 🔴 누락 (Design O, 구현 X)
- {항목}: {설명}

### 🟡 변경 (Design ≠ 구현)
- {항목}: Design에서는 {A}, 구현에서는 {B}

### 🟢 추가 (Design X, 구현 O)
- {항목}: {설명} — 의도적 추가인지 확인 필요

## 권장 조치
1. {조치 항목}
2. {조치 항목}

## 다음 단계
- 매치율 90%+ → `/report {feature-name}`
- 매치율 90% 미만 → 차이점 수정 후 `/check {feature-name}` 재실행
```

## 파일명 규칙

- **저장 위치**: `docs/03-analysis/`
- **파일명 형식**: `1-{YYYYMMDD}-{기능요약_한글}.analysis.md`
  - **시작일** (YYYYMMDD): 최초 작성일, **고정** (변경 불가)
  - **마지막 작업일** (MMDD): 다른 날 수정 시 추가, **매번 최신일로 덮어쓰기**
  - 같은 날 수정 시에는 마지막일 없이 기존 파일 업데이트
  ```
  최초 작성:     1-20260220-인스타그램_에디터_기능.analysis.md
  다른 날 수정:  1-20260220-0225-인스타그램_에디터_기능.analysis.md
  또 다른 날:    1-20260220-0301-인스타그램_에디터_기능.analysis.md  ← 0225→0301 덮어쓰기
  ```
- **보고서 내용**: 모든 항목은 **한글**로 작성 (코드/기술 용어만 영어 허용)

4. 결과를 `docs/03-analysis/1-{YYYYMMDD}-{기능요약_한글}.analysis.md`에 저장합니다.

5. 매치율에 따라 다음 단계를 안내합니다.
